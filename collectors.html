<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Collectors Overview &#8212; Perun 0.21.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/perun.css?v=25c05b3f" />
    <script src="_static/documentation_options.js?v=ab083fe0"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Postprocessors Overview" href="postprocessors.html" />
    <link rel="prev" title="Command Line Interface" href="cli.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="module-perun.collect">
<span id="id1"></span><span id="collectors-overview"></span><h1>Collectors Overview<a class="headerlink" href="#module-perun.collect" title="Link to this heading">¶</a></h1>
<p>Performance profiles originate either from the user’s own means (i.e. by
building their own collectors and generating the profiles w.r.t
<a class="reference internal" href="profile.html#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>) or using one of the collectors from Perun’s tool suite.</p>
<p>Perun can collect profiling data in two ways:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>By <strong>Directly running collectors</strong> through <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">collect</span></code> command,
that generates profile using a single collector with given collector
configuration. The resulting profiles are not postprocessed in any way.</p></li>
<li><p>By <strong>Using job specification</strong> either as a single run of batch of
profiling jobs using <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">run</span> <span class="pre">job</span></code> or according to the specification
of the so called job matrix using <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">run</span> <span class="pre">matrix</span></code> command.</p></li>
</ol>
</div></blockquote>
<p>The format of resulting profiles is w.r.t. <a class="reference internal" href="profile.html#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>. The
<a class="reference internal" href="profile.html#perfreg-origin"><code class="xref std std-preg docutils literal notranslate"><span class="pre">origin</span></code></a> is set to the current <code class="docutils literal notranslate"><span class="pre">HEAD</span></code> of the wrapped repository.
However, note that uncommited changes may skew the resulting profile and Perun
cannot guard your project against this. Further, <a class="reference internal" href="profile.html#perfreg-collector_info"><code class="xref std std-preg docutils literal notranslate"><span class="pre">collector_info</span></code></a> is
filled with configuration of the run collector.</p>
<p>All of the automatically generated profiles are stored in the <code class="docutils literal notranslate"><span class="pre">.perun/jobs/</span></code>
directory as a file with the <code class="docutils literal notranslate"><span class="pre">.perf</span></code> extension. The filename is by default
automatically generated according to the following template:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">-</span><span class="n">collector</span><span class="o">-</span><span class="n">workload</span><span class="o">-</span><span class="n">timestamp</span><span class="o">.</span><span class="n">perf</span>
</pre></div>
</div>
<p>Profiles can be further registered and stored in persistent storage using
<code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">add</span></code> command.  Then both stored and pending profiles (i.e. those not
yet assigned) can be postprocessed using the <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">postprocessby</span></code> or
interpreted using available interpretation techniques using <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">show</span></code>.
Refer to <a class="reference internal" href="cli.html"><span class="doc">Command Line Interface</span></a>, <a class="reference internal" href="postprocessors.html"><span class="doc">Postprocessors Overview</span></a> and <a class="reference internal" href="views.html"><span class="doc">Visualizations Overview</span></a> for more details
about running command line commands, capabilities of postprocessors and
interpretation techniques respectively. Internals of perun storage is described
in <a class="reference internal" href="internals.html"><span class="doc">Perun Internals</span></a>.</p>
<a class="reference internal image-reference" href="_images/architecture-collectors.svg"><img alt="_images/architecture-collectors.svg" class="align-center" src="_images/architecture-collectors.svg" width="100%" /></a>
<section id="supported-collectors">
<span id="collectors-list"></span><h2>Supported Collectors<a class="headerlink" href="#supported-collectors" title="Link to this heading">¶</a></h2>
<p>Perun’s tool suite currently contains the following three collectors:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p><a class="reference internal" href="#collectors-trace"><span class="std std-ref">Trace Collector</span></a> (authored by <strong>Jirka Pavela</strong>), collects running times of C/C++
functions along with the size of the structures they were executed on. E.g. this collects
resources such that function <code class="docutils literal notranslate"><span class="pre">search</span></code> over the class <code class="docutils literal notranslate"><span class="pre">SingleLinkedList</span></code> took 100ms on
single linked list with one million elements. <a class="reference internal" href="#collectors-trace-examples"><span class="std std-ref">Examples</span></a> shows
concrete examples of profiles generated by <a class="reference internal" href="#collectors-trace"><span class="std std-ref">Trace Collector</span></a></p></li>
<li><p><a class="reference internal" href="#collectors-memory"><span class="std std-ref">Memory Collector</span></a> (authored by <strong>Radima Podola</strong>), collects specifications of
allocations in C/C++ programs, such as the type of allocation or the full call trace.
<a class="reference internal" href="#collectors-memory-examples"><span class="std std-ref">Examples</span></a> shows concrete generated profiles by
<a class="reference internal" href="#collectors-memory"><span class="std std-ref">Memory Collector</span></a>.</p></li>
<li><p><a class="reference internal" href="#collectors-time"><span class="std std-ref">Time Collector</span></a>, collects overall running times of arbitrary commands. Internally
implemented as a simple wrapper over <code class="docutils literal notranslate"><span class="pre">time</span></code> utility</p></li>
<li><p><a class="reference internal" href="#collectors-bounds"><span class="std std-ref">Bounds Collector</span></a>, collects bounds of integer and, to some extent, heap-manipulating
loops represented as so called ranking function. The collectors works as a wrapper over
the <a class="reference external" href="https://forsyte.at/software/loopus/">Loopus</a> tool. The collection is limited to source codes only, written in subset of C
language, i.e. for some construction it might return wrong bounds (e.g. for <cite>switch</cite>
statement). Moreover, the runtime of <cite>bounds</cite> depends on Z3 library.</p></li>
</ol>
</div></blockquote>
<p>All of the listed collectors can be run from command line. For more information about command line
interface for individual collectors refer to <a class="reference internal" href="cli.html#cli-collect-units-ref"><span class="std std-ref">Collect units</span></a>.</p>
<p>Collector modules are implementation independent (hence, can be written in any language) and only
requires simple python interface registered within Perun. For brief tutorial how to create and
register new collectors in Perun refer to <a class="reference internal" href="#collectors-custom"><span class="std std-ref">Creating your own Collector</span></a>.</p>
<section id="module-perun.collect.trace">
<span id="trace-collector"></span><span id="collectors-trace"></span><h3>Trace Collector<a class="headerlink" href="#module-perun.collect.trace" title="Link to this heading">¶</a></h3>
<p>Trace collector collects running times of C/C++ functions.
The collected data are suitable for further postprocessing using
the regression analysis and visualization by scatter plots.</p>
<section id="overview-and-command-line-interface">
<span id="collectors-trace-cli"></span><h4>Overview and Command Line Interface<a class="headerlink" href="#overview-and-command-line-interface" title="Link to this heading">¶</a></h4>
<section id="perun-collect-trace">
<h5>perun collect trace<a class="headerlink" href="#perun-collect-trace" title="Link to this heading">¶</a></h5>
<p>Generates <cite>trace</cite> performance profile, capturing running times of
function depending on underlying structural sizes.</p>
<div class="line-block">
<div class="line">* <strong>Limitations</strong>: C/C++ binaries</div>
<div class="line">* <strong>Metric</strong>: <cite>mixed</cite> (captures both <cite>time</cite> and <cite>size</cite> consumption)</div>
<div class="line">* <strong>Dependencies</strong>: <code class="docutils literal notranslate"><span class="pre">SystemTap</span></code> (+ corresponding requirements e.g. kernel -dbgsym version)</div>
<div class="line">* <strong>Default units</strong>: <cite>us</cite> for <cite>time</cite>, <cite>element number</cite> for <cite>size</cite></div>
</div>
<p>Example of collected resources is as follows:</p>
<pre class="literal-block">{
    &quot;amount&quot;: 11,
    &quot;subtype&quot;: &quot;time delta&quot;,
    &quot;type&quot;: &quot;mixed&quot;,
    &quot;uid&quot;: &quot;SLList_init(SLList*)&quot;,
    &quot;structure-unit-size&quot;: 0
}</pre>
<p>Trace collector provides various collection <em>strategies</em> which are supposed to provide
sensible default settings for collection. This allows the user to choose suitable
collection method without the need of detailed rules / sampling specification. Currently
supported strategies are:</p>
<div class="line-block">
<div class="line">* <strong>userspace</strong>: This strategy traces all userspace functions / code blocks without</div>
<div class="line-block">
<div class="line">the use of sampling. Note that this strategy might be resource-intensive.</div>
</div>
<div class="line">* <strong>all</strong>: This strategy traces all userspace + library + kernel functions / code blocks</div>
<div class="line-block">
<div class="line">that are present in the traced binary without the use of sampling. Note that this strategy</div>
<div class="line">might be very resource-intensive.</div>
</div>
<div class="line">* <strong>u_sampled</strong>: Sampled version of the <strong>userspace</strong> strategy. This method uses sampling</div>
<div class="line-block">
<div class="line">to reduce the overhead and resources consumption.</div>
</div>
<div class="line">* <strong>a_sampled</strong>: Sampled version of the <strong>all</strong> strategy. Its goal is to reduce the</div>
<div class="line-block">
<div class="line">overhead and resources consumption of the <strong>all</strong> method.</div>
</div>
<div class="line">* <strong>custom</strong>: User-specified strategy. Requires the user to specify rules and sampling</div>
<div class="line-block">
<div class="line">manually.</div>
</div>
</div>
<p>Note that manually specified parameters have higher priority than strategy specification
and it is thus possible to override concrete rules / sampling by the user.</p>
<p>The collector interface operates with two seemingly same concepts: (external) command
and binary. External command refers to the script, executable, makefile, etc. that will
be called / invoked during the profiling, such as ‘make test’, ‘run_script.sh’, ‘./my_binary’.
Binary, on the other hand, refers to the actual binary or executable file that will be profiled
and contains specified functions / USDT probes etc. It is expected that the binary will be
invoked / called as part of the external command script or that external command and binary are
the same.</p>
<p>The interface for rules (functions, USDT probes) specification offers a way to specify
profiled locations both with sampling or without it. Note that sampling can reduce the
overhead imposed by the profiling. USDT rules can be further paired - paired rules act
as a start and end point for time measurement. Without a pair, the rule measures time
between each two probe hits. The pairing is done automatically for USDT locations with
convention &lt;name&gt; and &lt;name&gt;_end or &lt;name&gt;_END - or other commonly found suffixes.
Otherwise, it is possible to pair rules by the delimiter ‘#’, such as &lt;name1&gt;#&lt;name2&gt;.</p>
<p>Trace profiles are suitable for postprocessing by
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a> since they capture dependency of
time consumption depending on the size of the structure. This allows one to
model the estimation of trace of individual functions.</p>
<p>Scatter plots are suitable visualization for profiles collected by
<cite>trace</cite> collector, which plots individual points along with regression
models (if the profile was postprocessed by regression analysis). Run
<code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">show</span> <span class="pre">scatter</span> <span class="pre">--help</span></code> or refer to <a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> for more
information about <cite>scatter plots</cite>.</p>
<p>Refer to <a class="reference internal" href="#collectors-trace"><span class="std std-ref">Trace Collector</span></a> for more thorough description and
examples of <cite>trace</cite> collector.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>perun<span class="w"> </span>collect<span class="w"> </span>trace<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-e">
<span id="cmdoption-perun-collect-trace-engine"></span><span class="sig-name descname"><span class="pre">-e</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--engine</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;engine&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-e" title="Link to this definition">¶</a></dt>
<dd><p>Sets the data collection engine to be used:
- stap: the SystemTap framework
- ebpf: the eBPF framework</p>
<dl class="field-list simple">
<dt class="field-odd">Options<span class="colon">:</span></dt>
<dd class="field-odd"><p>stap | ebpf</p>
</dd>
</dl>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-s">
<span id="cmdoption-perun-collect-trace-strategy"></span><span class="sig-name descname"><span class="pre">-s</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--strategy</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;strategy&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-s" title="Link to this definition">¶</a></dt>
<dd><p><strong>Required</strong> Select strategy for probing the binary. See documentation for detailed explanation for each strategy.</p>
<dl class="field-list simple">
<dt class="field-odd">Options<span class="colon">:</span></dt>
<dd class="field-odd"><p>userspace | all | u_sampled | a_sampled | custom</p>
</dd>
</dl>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-f">
<span id="cmdoption-perun-collect-trace-func"></span><span class="sig-name descname"><span class="pre">-f</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--func</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;func&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-f" title="Link to this definition">¶</a></dt>
<dd><p>Set the probe point for the given function as &lt;lib&gt;#&lt;func&gt;#&lt;sampling&gt;.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-u">
<span id="cmdoption-perun-collect-trace-usdt"></span><span class="sig-name descname"><span class="pre">-u</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--usdt</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;usdt&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-u" title="Link to this definition">¶</a></dt>
<dd><p>Set the probe point for the given USDT location as &lt;lib&gt;#&lt;usdt&gt;#&lt;sampling&gt;.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-d">
<span id="cmdoption-perun-collect-trace-dynamic"></span><span class="sig-name descname"><span class="pre">-d</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--dynamic</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;dynamic&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-d" title="Link to this definition">¶</a></dt>
<dd><p>Set the probe point for the given dynamic location as &lt;lib&gt;#&lt;cl&gt;#&lt;sampling&gt;.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-g">
<span id="cmdoption-perun-collect-trace-global-sampling"></span><span class="sig-name descname"><span class="pre">-g</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--global-sampling</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;global_sampling&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-g" title="Link to this definition">¶</a></dt>
<dd><p>Set the global sample for all probes, sampling parameter for specific rules have higher priority.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-with-usdt">
<span id="cmdoption-perun-collect-trace-no-usdt"></span><span class="sig-name descname"><span class="pre">--with-usdt</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--no-usdt</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-with-usdt" title="Link to this definition">¶</a></dt>
<dd><p>The selected strategy will also extract and profile USDT probes.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-b">
<span id="cmdoption-perun-collect-trace-binary"></span><span class="sig-name descname"><span class="pre">-b</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--binary</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;binary&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-b" title="Link to this definition">¶</a></dt>
<dd><p>The profiled executable. If not set, then the command is considered to be the profiled executable and is used as a binary parameter.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-l">
<span id="cmdoption-perun-collect-trace-libs"></span><span class="sig-name descname"><span class="pre">-l</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--libs</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;libs&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-l" title="Link to this definition">¶</a></dt>
<dd><p>Additional libraries that should also be profiled.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-t">
<span id="cmdoption-perun-collect-trace-timeout"></span><span class="sig-name descname"><span class="pre">-t</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--timeout</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;timeout&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-t" title="Link to this definition">¶</a></dt>
<dd><p>Set time limit (in seconds) for the profiled command, i.e. the command will be terminated after reaching the time limit. Useful for, e.g., endless commands.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-z">
<span id="cmdoption-perun-collect-trace-zip-temps"></span><span class="sig-name descname"><span class="pre">-z</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--zip-temps</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-z" title="Link to this definition">¶</a></dt>
<dd><p>Zip and compress the temporary files (SystemTap log, raw performance data, watchdog log, etc.) into the Perun log directory before deleting them.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-k">
<span id="cmdoption-perun-collect-trace-keep-temps"></span><span class="sig-name descname"><span class="pre">-k</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--keep-temps</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-k" title="Link to this definition">¶</a></dt>
<dd><p>Do not delete the temporary files in the file system.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-vt">
<span id="cmdoption-perun-collect-trace-verbose-trace"></span><span class="sig-name descname"><span class="pre">-vt</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--verbose-trace</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-vt" title="Link to this definition">¶</a></dt>
<dd><p>Set the trace file output to be more verbose, useful for debugging.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-q">
<span id="cmdoption-perun-collect-trace-quiet"></span><span class="sig-name descname"><span class="pre">-q</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--quiet</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-q" title="Link to this definition">¶</a></dt>
<dd><p>Reduces the verbosity of the collector info messages.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-w">
<span id="cmdoption-perun-collect-trace-watchdog"></span><span class="sig-name descname"><span class="pre">-w</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--watchdog</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-w" title="Link to this definition">¶</a></dt>
<dd><p>Enable detailed logging of the whole collection process.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-o">
<span id="cmdoption-perun-collect-trace-output-handling"></span><span class="sig-name descname"><span class="pre">-o</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--output-handling</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;output_handling&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-o" title="Link to this definition">¶</a></dt>
<dd><p>Sets the output handling of the profiled command:
- default: the output is displayed in the terminal
- capture: the output is being captured into a file as well as displayed in the terminal (note that buffering causes a delay in the terminal output)
- suppress: redirects the output to the DEVNULL</p>
<dl class="field-list simple">
<dt class="field-odd">Options<span class="colon">:</span></dt>
<dd class="field-odd"><p>default | capture | suppress</p>
</dd>
</dl>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-i">
<span id="cmdoption-perun-collect-trace-diagnostics"></span><span class="sig-name descname"><span class="pre">-i</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--diagnostics</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-i" title="Link to this definition">¶</a></dt>
<dd><p>Enable detailed surveillance mode of the collector. The collector turns on detailed logging (watchdog), verbose trace, capturing output etc. and stores the logs and files in an archive (zip-temps) in order to provide as much diagnostic data as possible for further inspection.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-sc">
<span id="cmdoption-perun-collect-trace-stap-cache-off"></span><span class="sig-name descname"><span class="pre">-sc</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--stap-cache-off</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-sc" title="Link to this definition">¶</a></dt>
<dd><p>Disables the SystemTap caching of compiled scripts.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-np">
<span id="cmdoption-perun-collect-trace-no-profile"></span><span class="sig-name descname"><span class="pre">-np</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--no-profile</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-np" title="Link to this definition">¶</a></dt>
<dd><p>Tracer will not transform and save processed data into a perun profile.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-mcg">
<span id="cmdoption-perun-collect-trace-extract-mixed-cg"></span><span class="sig-name descname"><span class="pre">-mcg</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--extract-mixed-cg</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-mcg" title="Link to this definition">¶</a></dt>
<dd><p>DEBUG: Extract mixed CG.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-cg">
<span id="cmdoption-perun-collect-trace-only-extract-cg"></span><span class="sig-name descname"><span class="pre">-cg</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--only-extract-cg</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-cg" title="Link to this definition">¶</a></dt>
<dd><p>Tracer will only extract the CG of the current project version and terminate.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-mt">
<span id="cmdoption-perun-collect-trace-max-simultaneous-threads"></span><span class="sig-name descname"><span class="pre">-mt</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--max-simultaneous-threads</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;max_simultaneous_threads&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-trace-mt" title="Link to this definition">¶</a></dt>
<dd><p>DEBUG: Maximum number of expected simultaneous threads when sampling is on.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-trace-nds">
<span id="cmdoption-perun-collect-trace-no-ds-update"></span><span class="sig-name descname"><span class="pre">-nds</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--no-ds-update</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-trace-nds" title="Link to this definition">¶</a></dt>
<dd><p>DEBUG: Disables Dynamic Stats updates</p>
</dd></dl>

</section>
</section>
<section id="examples">
<span id="collectors-trace-examples"></span><h4>Examples<a class="headerlink" href="#examples" title="Link to this heading">¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="hll"><span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos"> 3</span><span class="w">    </span><span class="nt">&quot;SLList_insert(SLList*, int)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">      </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos"> 5</span><span class="w">        </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span>
<span class="linenos"> 6</span><span class="w">      </span><span class="p">],</span>
<span class="hll"><span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="linenos"> 8</span><span class="w">        </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span>
<span class="linenos"> 9</span><span class="w">      </span><span class="p">]</span>
<span class="linenos">10</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">11</span><span class="w">    </span><span class="nt">&quot;SLList_destroy(SLList*)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="linenos">12</span><span class="w">      </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="linenos">13</span><span class="w">        </span><span class="mi">1</span>
<span class="linenos">14</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">15</span><span class="w">      </span><span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">16</span><span class="w">        </span><span class="mi">4</span>
<span class="linenos">17</span><span class="w">      </span><span class="p">]</span>
<span class="linenos">18</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">19</span><span class="w">    </span><span class="nt">&quot;SLList_init(SLList*)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">20</span><span class="w">      </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">21</span><span class="w">        </span><span class="mi">6</span>
<span class="linenos">22</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">23</span><span class="w">      </span><span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">24</span><span class="w">        </span><span class="mi">0</span>
<span class="linenos">25</span><span class="w">      </span><span class="p">]</span>
<span class="linenos">26</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">27</span><span class="w">    </span><span class="nt">&quot;SLList_search(SLList*, int)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">28</span><span class="w">      </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">29</span><span class="w">        </span><span class="mi">0</span>
<span class="linenos">30</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">31</span><span class="w">      </span><span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">32</span><span class="w">        </span><span class="mi">0</span>
<span class="linenos">33</span><span class="w">      </span><span class="p">]</span>
<span class="linenos">34</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">35</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">36</span><span class="w">  </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">37</span><span class="w">    </span><span class="nt">&quot;workload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos">38</span><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mixed&quot;</span><span class="p">,</span>
<span class="linenos">39</span><span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">40</span><span class="w">      </span><span class="nt">&quot;mixed(time delta)&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;us&quot;</span>
<span class="linenos">41</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">42</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="hll"><span class="linenos">43</span><span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../stap-collector/tst&quot;</span>
</span><span class="linenos">44</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">45</span><span class="w">  </span><span class="nt">&quot;models&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">46</span><span class="w">  </span><span class="nt">&quot;collector_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="linenos">47</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos">48</span><span class="w">      </span><span class="nt">&quot;global_sampling&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">49</span><span class="w">      </span><span class="nt">&quot;sampling&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="hll"><span class="linenos">50</span><span class="w">        </span><span class="p">{</span>
</span><span class="hll"><span class="linenos">51</span><span class="w">          </span><span class="nt">&quot;func&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_insert&quot;</span><span class="p">,</span>
</span><span class="linenos">52</span><span class="w">          </span><span class="nt">&quot;sample&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="linenos">53</span><span class="w">        </span><span class="p">},</span>
<span class="linenos">54</span><span class="w">        </span><span class="p">{</span>
<span class="linenos">55</span><span class="w">          </span><span class="nt">&quot;func&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;func1&quot;</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">          </span><span class="nt">&quot;sample&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="linenos">57</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">58</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">59</span><span class="w">      </span><span class="nt">&quot;rules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">60</span><span class="w">        </span><span class="s2">&quot;SLList_init&quot;</span><span class="p">,</span>
<span class="linenos">61</span><span class="w">        </span><span class="s2">&quot;SLList_insert&quot;</span><span class="p">,</span>
<span class="linenos">62</span><span class="w">        </span><span class="s2">&quot;SLList_search&quot;</span><span class="p">,</span>
<span class="linenos">63</span><span class="w">        </span><span class="s2">&quot;SLList_destroy&quot;</span>
<span class="linenos">64</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">65</span><span class="w">      </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;custom&quot;</span>
<span class="linenos">66</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">67</span><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;complexity&quot;</span>
<span class="linenos">68</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">69</span><span class="w">  </span><span class="nt">&quot;resource_type_map&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">70</span><span class="w">    </span><span class="nt">&quot;SLList_insert(SLList*, int)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">71</span><span class="w">      </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
<span class="linenos">72</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
<span class="linenos">73</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6.8e-05s&quot;</span><span class="p">,</span>
<span class="linenos">74</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mixed&quot;</span>
<span class="linenos">75</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">76</span><span class="w">    </span><span class="nt">&quot;SLList_destroy(SLList*)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">77</span><span class="w">      </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
<span class="linenos">78</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_destroy(SLList*)&quot;</span><span class="p">,</span>
<span class="linenos">79</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6.8e-05s&quot;</span><span class="p">,</span>
<span class="linenos">80</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mixed&quot;</span>
<span class="linenos">81</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">82</span><span class="w">    </span><span class="nt">&quot;SLList_init(SLList*)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">83</span><span class="w">      </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
<span class="linenos">84</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_init(SLList*)&quot;</span><span class="p">,</span>
<span class="linenos">85</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6.8e-05s&quot;</span><span class="p">,</span>
<span class="linenos">86</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mixed&quot;</span>
<span class="linenos">87</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">88</span><span class="w">    </span><span class="nt">&quot;SLList_search(SLList*, int)#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">89</span><span class="w">      </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
<span class="linenos">90</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_search(SLList*, int)&quot;</span><span class="p">,</span>
<span class="linenos">91</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6.8e-05s&quot;</span><span class="p">,</span>
<span class="linenos">92</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mixed&quot;</span>
<span class="linenos">93</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">94</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">95</span><span class="w">  </span><span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">96</span><span class="w">  </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f7f3dcea69b97f2b03c421a223a770917149cfae&quot;</span>
<span class="linenos">97</span><span class="p">}</span>
</pre></div>
</div>
<p>The above is an example of profiled data for the simple manipulation with program with single
linked list. Profile captured running times of three functions—<code class="docutils literal notranslate"><span class="pre">SLList_init</span></code> (an
initialization of single linked list), <code class="docutils literal notranslate"><span class="pre">SLList_destroy</span></code> (a destruction of single linked list) and
<code class="docutils literal notranslate"><span class="pre">SLList_search</span></code> (search over the single linked list).</p>
<p>Highlighted lines show important keys and regions in the profile, e.g. the <a class="reference internal" href="profile.html#perfreg-origin"><code class="xref std std-preg docutils literal notranslate"><span class="pre">origin</span></code></a>,
<code class="xref std std-preg docutils literal notranslate"><span class="pre">collector-info</span></code> or <a class="reference internal" href="profile.html#perfkey-resources"><em class="xref std std-pkey">resources</em></a>.</p>
<img alt="_images/complexity-scatter-with-models.png" src="_images/complexity-scatter-with-models.png" />
<p>The <a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> above shows the example of visualization of trace profile. Each
points corresponds to the running time of the <code class="docutils literal notranslate"><span class="pre">SLList_search</span></code> function over the single linked
list with <code class="docutils literal notranslate"><span class="pre">structure-unit-size</span></code> elements. Elements are further interleaved with set of models
obtained by <a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>. The light green line corresponds to <cite>linear</cite>
model, which seems to be the most fitting to model the performance of given function.</p>
<img alt="_images/complexity-bars.png" src="_images/complexity-bars.png" />
<p>The <a class="reference internal" href="views.html#views-bars"><span class="std std-ref">Bars Plot</span></a> above shows the overall sum of the running times for each
<code class="docutils literal notranslate"><span class="pre">structure-unit-size</span></code> for the <code class="docutils literal notranslate"><span class="pre">SLList_search</span></code> function. The interpretation highlights that the
most of the consumed running time were over the single linked lists with 41 elements.</p>
<img alt="_images/complexity-flow.png" src="_images/complexity-flow.png" />
<p>The <a class="reference internal" href="views.html#views-flow"><span class="std std-ref">Flow Plot</span></a> above shows the trend of the average running time of the <code class="docutils literal notranslate"><span class="pre">SLList_search</span></code>
function depending on the size of the structure we execute the search on.</p>
</section>
</section>
<section id="module-perun.collect.memory">
<span id="memory-collector"></span><span id="collectors-memory"></span><h3>Memory Collector<a class="headerlink" href="#module-perun.collect.memory" title="Link to this heading">¶</a></h3>
<p>Memory collector collects allocations of C/C++ functions, target addresses
of allocations, type of allocations, etc.</p>
<section id="id2">
<h4>Overview and Command Line Interface<a class="headerlink" href="#id2" title="Link to this heading">¶</a></h4>
<section id="perun-collect-memory">
<h5>perun collect memory<a class="headerlink" href="#perun-collect-memory" title="Link to this heading">¶</a></h5>
<p>Generates <cite>memory</cite> performance profile, capturing memory allocations of
different types along with target address and full call trace.</p>
<div class="line-block">
<div class="line">* <strong>Limitations</strong>: C/C++ binaries</div>
<div class="line">* <strong>Metric</strong>: <cite>memory</cite></div>
<div class="line">* <strong>Dependencies</strong>: <code class="docutils literal notranslate"><span class="pre">libunwind.so</span></code> and custom <code class="docutils literal notranslate"><span class="pre">libmalloc.so</span></code></div>
<div class="line">* <strong>Default units</strong>: <cite>B</cite> for <cite>memory</cite></div>
</div>
<p>The following snippet shows the example of resources collected by <cite>memory</cite>
profiler. It captures allocations done by functions with more detailed
description, such as the type of allocation, trace, etc.</p>
<pre class="literal-block">{
    &quot;type&quot;: &quot;memory&quot;,
    &quot;subtype&quot;: &quot;malloc&quot;,
    &quot;address&quot;: 19284560,
    &quot;amount&quot;: 4,
    &quot;trace&quot;: [
        {
            &quot;source&quot;: &quot;../memory_collect_test.c&quot;,
            &quot;function&quot;: &quot;main&quot;,
            &quot;line&quot;: 22
        },
    ],
    &quot;uid&quot;: {
        &quot;source&quot;: &quot;../memory_collect_test.c&quot;,
        &quot;function&quot;: &quot;main&quot;,
        &quot;line&quot;: 22
    }
},</pre>
<p>Refer to <a class="reference internal" href="#collectors-memory"><span class="std std-ref">Memory Collector</span></a> for more thorough description and
examples of <cite>memory</cite> collector.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>perun<span class="w"> </span>collect<span class="w"> </span>memory<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-memory-s">
<span id="cmdoption-perun-collect-memory-sampling"></span><span class="sig-name descname"><span class="pre">-s</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--sampling</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;sampling&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-memory-s" title="Link to this definition">¶</a></dt>
<dd><p>Sets the sampling interval for profiling the allocations. I.e. memory snapshots will be collected each &lt;sampling&gt; seconds.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-memory-no-source">
<span class="sig-name descname"><span class="pre">--no-source</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;no_source&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-memory-no-source" title="Link to this definition">¶</a></dt>
<dd><p>Will exclude allocations done from &lt;no_source&gt; file during the profiling.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-memory-no-func">
<span class="sig-name descname"><span class="pre">--no-func</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;no_func&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-memory-no-func" title="Link to this definition">¶</a></dt>
<dd><p>Will exclude allocations done by &lt;no func&gt; function during the profiling.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-memory-a">
<span id="cmdoption-perun-collect-memory-all"></span><span class="sig-name descname"><span class="pre">-a</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--all</span></span><span class="sig-prename descclassname"></span><a class="headerlink" href="#cmdoption-perun-collect-memory-a" title="Link to this definition">¶</a></dt>
<dd><p>Will record the full trace for each allocation, i.e. it will include all allocators and even unreachable records.</p>
</dd></dl>

</section>
</section>
<section id="collectors-memory-examples">
<span id="id3"></span><h4>Examples<a class="headerlink" href="#collectors-memory-examples" title="Link to this heading">¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos">  1</span><span class="p">{</span>
<span class="hll"><span class="linenos">  2</span><span class="w">  </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos">  3</span><span class="w">    </span><span class="nt">&quot;../memory_collect_test.c:main:22#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">  4</span><span class="w">      </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">  5</span><span class="w">        </span><span class="mi">4</span>
<span class="linenos">  6</span><span class="w">      </span><span class="p">],</span>
<span class="hll"><span class="linenos">  7</span><span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="linenos">  8</span><span class="w">        </span><span class="mi">19284560</span>
<span class="linenos">  9</span><span class="w">      </span><span class="p">]</span>
<span class="linenos"> 10</span><span class="w">    </span><span class="p">},</span>
<span class="linenos"> 11</span><span class="w">    </span><span class="nt">&quot;../memory_collect_test.c:main:27#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="linenos"> 12</span><span class="w">      </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="linenos"> 13</span><span class="w">        </span><span class="mi">0</span>
<span class="linenos"> 14</span><span class="w">      </span><span class="p">],</span>
<span class="linenos"> 15</span><span class="w">      </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos"> 16</span><span class="w">        </span><span class="mi">19284560</span>
<span class="linenos"> 17</span><span class="w">      </span><span class="p">]</span>
<span class="linenos"> 18</span><span class="w">    </span><span class="p">}</span>
<span class="linenos"> 19</span><span class="w">  </span><span class="p">},</span>
<span class="linenos"> 20</span><span class="w">  </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 21</span><span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="linenos"> 22</span><span class="w">      </span><span class="nt">&quot;memory&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;B&quot;</span>
</span><span class="linenos"> 23</span><span class="w">    </span><span class="p">},</span>
<span class="linenos"> 24</span><span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./mct&quot;</span><span class="p">,</span>
<span class="linenos"> 25</span><span class="w">    </span><span class="nt">&quot;workload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="hll"><span class="linenos"> 26</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 27</span><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span>
</span><span class="hll"><span class="linenos"> 28</span><span class="w">  </span><span class="p">},</span>
</span><span class="hll"><span class="linenos"> 29</span><span class="w">  </span><span class="nt">&quot;models&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
</span><span class="hll"><span class="linenos"> 30</span><span class="w">  </span><span class="nt">&quot;collector_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 31</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 32</span><span class="w">      </span><span class="nt">&quot;all&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 33</span><span class="w">      </span><span class="nt">&quot;sampling&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.025</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 34</span><span class="w">      </span><span class="nt">&quot;no_func&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 35</span><span class="w">      </span><span class="nt">&quot;no_source&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">null</span>
</span><span class="hll"><span class="linenos"> 36</span><span class="w">    </span><span class="p">},</span>
</span><span class="hll"><span class="linenos"> 37</span><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span>
</span><span class="hll"><span class="linenos"> 38</span><span class="w">  </span><span class="p">},</span>
</span><span class="hll"><span class="linenos"> 39</span><span class="w">  </span><span class="nt">&quot;resource_type_map&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 40</span><span class="w">    </span><span class="nt">&quot;../memory_collect_test.c:main:22#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 41</span><span class="w">      </span><span class="nt">&quot;snapshot&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 42</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.025000&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 43</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 44</span><span class="w">      </span><span class="nt">&quot;trace&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
</span><span class="hll"><span class="linenos"> 45</span><span class="w">        </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 46</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;malloc&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 47</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 48</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unreachable&quot;</span>
</span><span class="hll"><span class="linenos"> 49</span><span class="w">        </span><span class="p">},</span>
</span><span class="hll"><span class="linenos"> 50</span><span class="w">        </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 51</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 52</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span>
</span><span class="hll"><span class="linenos"> 53</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span>
</span><span class="hll"><span class="linenos"> 54</span><span class="w">        </span><span class="p">},</span>
</span><span class="hll"><span class="linenos"> 55</span><span class="w">        </span><span class="p">{</span>
</span><span class="hll"><span class="linenos"> 56</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__libc_start_main&quot;</span><span class="p">,</span>
</span><span class="linenos"> 57</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 58</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unreachable&quot;</span>
<span class="linenos"> 59</span><span class="w">        </span><span class="p">},</span>
<span class="linenos"> 60</span><span class="w">        </span><span class="p">{</span>
<span class="linenos"> 61</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_start&quot;</span><span class="p">,</span>
<span class="linenos"> 62</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 63</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unreachable&quot;</span>
<span class="linenos"> 64</span><span class="w">        </span><span class="p">}</span>
<span class="linenos"> 65</span><span class="w">      </span><span class="p">],</span>
<span class="linenos"> 66</span><span class="w">      </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;malloc&quot;</span><span class="p">,</span>
<span class="linenos"> 67</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 68</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="linenos"> 69</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span><span class="p">,</span>
<span class="linenos"> 70</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span>
<span class="linenos"> 71</span><span class="w">      </span><span class="p">}</span>
<span class="linenos"> 72</span><span class="w">    </span><span class="p">},</span>
<span class="linenos"> 73</span><span class="w">    </span><span class="nt">&quot;../memory_collect_test.c:main:27#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 74</span><span class="w">      </span><span class="nt">&quot;snapshot&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 75</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.025000&quot;</span><span class="p">,</span>
<span class="linenos"> 76</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span><span class="p">,</span>
<span class="linenos"> 77</span><span class="w">      </span><span class="nt">&quot;trace&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos"> 78</span><span class="w">        </span><span class="p">{</span>
<span class="linenos"> 79</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;free&quot;</span><span class="p">,</span>
<span class="linenos"> 80</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 81</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unreachable&quot;</span>
<span class="linenos"> 82</span><span class="w">        </span><span class="p">},</span>
<span class="linenos"> 83</span><span class="w">        </span><span class="p">{</span>
<span class="linenos"> 84</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="linenos"> 85</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span>
<span class="linenos"> 86</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span>
<span class="linenos"> 87</span><span class="w">        </span><span class="p">},</span>
<span class="linenos"> 88</span><span class="w">        </span><span class="p">{</span>
<span class="linenos"> 89</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;__libc_start_main&quot;</span><span class="p">,</span>
<span class="linenos"> 90</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 91</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unreachable&quot;</span>
<span class="linenos"> 92</span><span class="w">        </span><span class="p">},</span>
<span class="linenos"> 93</span><span class="w">        </span><span class="p">{</span>
<span class="linenos"> 94</span><span class="w">          </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;_start&quot;</span><span class="p">,</span>
<span class="linenos"> 95</span><span class="w">          </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="linenos"> 96</span><span class="w">          </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;unreachable&quot;</span>
<span class="linenos"> 97</span><span class="w">        </span><span class="p">}</span>
<span class="linenos"> 98</span><span class="w">      </span><span class="p">],</span>
<span class="linenos"> 99</span><span class="w">      </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;free&quot;</span><span class="p">,</span>
<span class="linenos">100</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">101</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="linenos">102</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p">,</span>
<span class="linenos">103</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span>
<span class="linenos">104</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">105</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">106</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">107</span><span class="w">  </span><span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">108</span><span class="w">  </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;74288675e4074f1ad5bbb0d3b3253911ab42267a&quot;</span>
<span class="linenos">109</span><span class="p">}</span>
</pre></div>
</div>
<p>The above is an example of profiled data on a simple binary, which makes several minor allocations.
Profile shows a simple allocation followed by deallocation and highlights important keys and
regions in the <cite>memory</cite> profiles, e.g. the <a class="reference internal" href="profile.html#perfreg-origin"><code class="xref std std-preg docutils literal notranslate"><span class="pre">origin</span></code></a>, <code class="xref std std-preg docutils literal notranslate"><span class="pre">collector-info</span></code> or
<a class="reference internal" href="profile.html#perfkey-resources"><em class="xref std std-pkey">resources</em></a></p>
<img alt="_images/memory-flow.png" src="_images/memory-flow.png" />
<p>The <a class="reference internal" href="views.html#views-flow"><span class="std std-ref">Flow Plot</span></a> above shows the mean of allocated amounts per each allocation site (i.e.
<code class="docutils literal notranslate"><span class="pre">uid</span></code>) in stacked mode. The stacking of the means clearly shows, where the biggest allocations
where made during the program run.</p>
<img alt="_images/memory-flamegraph.png" src="_images/memory-flamegraph.png" />
<p>The <a class="reference internal" href="views.html#views-flame-graph"><span class="std std-ref">Flame Graph</span></a> is an efficient visualization of inclusive consumption of resources.
The width of the base of one flame shows the bottleneck and hotspots of profiled binaries.</p>
</section>
</section>
<section id="module-perun.collect.time">
<span id="time-collector"></span><span id="collectors-time"></span><h3>Time Collector<a class="headerlink" href="#module-perun.collect.time" title="Link to this heading">¶</a></h3>
<p>Time collector collects is a simple wrapper over the time utility. There is
nothing special about this, the profiles are simple, and no visualization is
especially suitable for this mode.</p>
<section id="id4">
<h4>Overview and Command Line Interface<a class="headerlink" href="#id4" title="Link to this heading">¶</a></h4>
<section id="perun-collect-time">
<h5>perun collect time<a class="headerlink" href="#perun-collect-time" title="Link to this heading">¶</a></h5>
<p>Generates <cite>time</cite> performance profile, capturing overall running times of
the profiled command.</p>
<div class="line-block">
<div class="line">* <strong>Limitations</strong>: <cite>none</cite></div>
<div class="line">* <strong>Metric</strong>: running <cite>time</cite></div>
<div class="line">* <strong>Dependencies</strong>: <cite>none</cite></div>
<div class="line">* <strong>Default units</strong>: <cite>s</cite></div>
</div>
<p>This is a wrapper over the <code class="docutils literal notranslate"><span class="pre">time</span></code> linux unitility and captures resources
in the following form:</p>
<pre class="literal-block">{
    &quot;amount&quot;: 0.59,
    &quot;type&quot;: &quot;time&quot;,
    &quot;subtype&quot;: &quot;sys&quot;,
    &quot;uid&quot;: cmd
    &quot;order&quot;: 1
}</pre>
<p>Refer to <a class="reference internal" href="#collectors-time"><span class="std std-ref">Time Collector</span></a> for more thorough description and examples
of <cite>trace</cite> collector.</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>perun<span class="w"> </span>collect<span class="w"> </span><span class="nb">time</span><span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-time-w">
<span id="cmdoption-perun-collect-time-warmup"></span><span class="sig-name descname"><span class="pre">-w</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--warmup</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;int&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-time-w" title="Link to this definition">¶</a></dt>
<dd><p>Before the actual timing, the collector will execute &lt;int&gt; warm-up executions.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-time-r">
<span id="cmdoption-perun-collect-time-repeat"></span><span class="sig-name descname"><span class="pre">-r</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--repeat</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;int&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-time-r" title="Link to this definition">¶</a></dt>
<dd><p>The timing of the given binaries will be repeated &lt;int&gt; times.</p>
</dd></dl>

</section>
</section>
<section id="collectors-time-examples">
<span id="id5"></span><h4>Examples<a class="headerlink" href="#collectors-time-examples" title="Link to this heading">¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="hll"><span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;8de6cd99e4dc36cd73a2af906cde12456e96d9f1&quot;</span><span class="p">,</span>
</span><span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="linenos"> 7</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s&quot;</span>
</span><span class="linenos"> 8</span><span class="w">    </span><span class="p">},</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
<span class="linenos">10</span><span class="w">    </span><span class="nt">&quot;workload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;100000&quot;</span>
<span class="linenos">11</span><span class="w">  </span><span class="p">},</span>
<span class="hll"><span class="linenos">12</span><span class="w">  </span><span class="nt">&quot;collector_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos">13</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
</span><span class="hll"><span class="linenos">14</span><span class="w">      </span><span class="nt">&quot;repeat&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">15</span><span class="w">      </span><span class="nt">&quot;warmup&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span>
</span><span class="hll"><span class="linenos">16</span><span class="w">    </span><span class="p">},</span>
</span><span class="hll"><span class="linenos">17</span><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span>
</span><span class="hll"><span class="linenos">18</span><span class="w">  </span><span class="p">},</span>
</span><span class="linenos">19</span><span class="w">  </span><span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">20</span><span class="w">  </span><span class="nt">&quot;global&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">21</span><span class="w">    </span><span class="nt">&quot;timestamp&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.565476655960083</span><span class="p">,</span>
<span class="linenos">22</span><span class="w">    </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">23</span><span class="w">      </span><span class="p">{</span>
<span class="hll"><span class="linenos">24</span><span class="w">        </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;real&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">25</span><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">26</span><span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">27</span><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">28</span><span class="w">        </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.26</span>
</span><span class="linenos">29</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">30</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">31</span><span class="w">        </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<span class="linenos">32</span><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
<span class="linenos">33</span><span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">34</span><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="linenos">35</span><span class="w">        </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.25</span>
<span class="linenos">36</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">37</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">38</span><span class="w">        </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sys&quot;</span><span class="p">,</span>
<span class="linenos">39</span><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
<span class="linenos">40</span><span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span>
<span class="linenos">41</span><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="linenos">42</span><span class="w">        </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span>
<span class="linenos">43</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">44</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">45</span><span class="w">        </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;real&quot;</span><span class="p">,</span>
<span class="linenos">46</span><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
<span class="linenos">47</span><span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">48</span><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="linenos">49</span><span class="w">        </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.27</span>
<span class="linenos">50</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">51</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">52</span><span class="w">        </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;user&quot;</span><span class="p">,</span>
<span class="linenos">53</span><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
<span class="linenos">54</span><span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">55</span><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">        </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.28</span>
<span class="linenos">57</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">58</span><span class="w">      </span><span class="p">{</span>
<span class="linenos">59</span><span class="w">        </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sys&quot;</span><span class="p">,</span>
<span class="linenos">60</span><span class="w">        </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./list_search&quot;</span><span class="p">,</span>
<span class="linenos">61</span><span class="w">        </span><span class="nt">&quot;order&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span>
<span class="linenos">62</span><span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="linenos">63</span><span class="w">        </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0</span>
<span class="linenos">64</span><span class="w">      </span><span class="p">}</span>
<span class="linenos">65</span><span class="w">    </span><span class="p">]</span>
<span class="linenos">66</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">67</span><span class="p">}</span>
</pre></div>
</div>
<p>The above is an example of profiled data using the <cite>time</cite> wrapper with important regions and keys
highlighted. The given command was profiled two times.</p>
</section>
</section>
<section id="module-perun.collect.bounds">
<span id="bounds-collector"></span><span id="collectors-bounds"></span><h3>Bounds Collector<a class="headerlink" href="#module-perun.collect.bounds" title="Link to this heading">¶</a></h3>
<p>Automatic analysis of resource bounds of C programs.</p>
<p>Bounds collector employs a technique of Loopus tool (see <a class="reference external" href="https://forsyte.at/software/loopus/page/11/">loopus-site</a>), which performs an amortized
analysis of input C program. Loopus is limited to integer programs only, and for each function and
for each loop it computes a symbolic bound (e.g. 2*n + max(0, m)). Moreover, it computes the big-O
notation highlighting the main source of the complexity.</p>
<section id="id6">
<h4>Overview and Command Line Interface<a class="headerlink" href="#id6" title="Link to this heading">¶</a></h4>
<section id="perun-collect-bounds">
<h5>perun collect bounds<a class="headerlink" href="#perun-collect-bounds" title="Link to this heading">¶</a></h5>
<dl>
<dt>Generates <cite>memory</cite> performance profile, capturing memory allocations of</dt><dd><p>different types along with target address and full call trace.</p>
<dl class="simple">
<dt></dt><dd><ul class="simple">
<li><p><strong>Limitations</strong>: C/C++ binaries</p></li>
<li><p><strong>Metric</strong>: <cite>memory</cite></p></li>
<li><p><strong>Dependencies</strong>: <code class="docutils literal notranslate"><span class="pre">libunwind.so</span></code> and custom <code class="docutils literal notranslate"><span class="pre">libmalloc.so</span></code></p></li>
<li><p><strong>Default units</strong>: <cite>B</cite> for <cite>memory</cite></p></li>
</ul>
</dd>
</dl>
<p>The following snippet shows the example of resources collected by <cite>memory</cite>
profiler. It captures allocations done by functions with more detailed
description, such as the type of allocation, trace, etc.</p>
</dd>
</dl>
<pre class="literal-block">{
        &quot;uid&quot;: {
            &quot;source&quot;: &quot;../test.c&quot;,
            &quot;function&quot;: &quot;main&quot;,
            &quot;line&quot;: 22
            &quot;column&quot;: 40
        }
        &quot;bound&quot;: &quot;1 + max(0, (k + -1))&quot;,
        &quot;class&quot;: &quot;O(n^1)&quot;
        &quot;type&quot;: &quot;bound&quot;,
}

Refer to :ref:`collectors-bounds` for more thorough description and
examples of `bounds` collector.</pre>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>perun<span class="w"> </span>collect<span class="w"> </span>bounds<span class="w"> </span><span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-bounds-s">
<span id="cmdoption-perun-collect-bounds-source"></span><span id="cmdoption-perun-collect-bounds-src"></span><span class="sig-name descname"><span class="pre">-s</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--source</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--src</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;path&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-bounds-s" title="Link to this definition">¶</a></dt>
<dd><p>Source C file that will be analyzed.</p>
</dd></dl>

<dl class="std option">
<dt class="sig sig-object std" id="cmdoption-perun-collect-bounds-d">
<span id="cmdoption-perun-collect-bounds-source-dir"></span><span class="sig-name descname"><span class="pre">-d</span></span><span class="sig-prename descclassname"></span><span class="sig-prename descclassname"><span class="pre">,</span> </span><span class="sig-name descname"><span class="pre">--source-dir</span></span><span class="sig-prename descclassname"> <span class="pre">&lt;dir&gt;</span></span><a class="headerlink" href="#cmdoption-perun-collect-bounds-d" title="Link to this definition">¶</a></dt>
<dd><p>Directory, where source C files are stored. All of the existing files with valid extensions (.c).</p>
</dd></dl>

</section>
</section>
<section id="collectors-bounds-examples">
<span id="id7"></span><h4>Examples<a class="headerlink" href="#collectors-bounds-examples" title="Link to this heading">¶</a></h4>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">  </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;409dd7468a328038c9a1ea5a6a0f7baa89f8997a&quot;</span><span class="p">,</span>
<span class="linenos"> 3</span><span class="w">  </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bound&quot;</span><span class="p">,</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="nt">&quot;workload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 8</span><span class="w">      </span><span class="nt">&quot;bound&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;iterations&quot;</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">10</span><span class="w">    </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;partitioning&quot;</span>
<span class="linenos">11</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">12</span><span class="w">  </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">13</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:34:42#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="linenos">14</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:49:60#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="linenos">15</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:64:69#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="linenos">16</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:18:4#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="linenos">17</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:55:58#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="linenos">18</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">19</span><span class="w">  </span><span class="nt">&quot;models&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">20</span><span class="w">  </span><span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">21</span><span class="w">  </span><span class="nt">&quot;collector_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">22</span><span class="w">    </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">23</span><span class="w">      </span><span class="nt">&quot;sources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">24</span><span class="w">        </span><span class="s2">&quot;int_partitioning.c&quot;</span>
<span class="linenos">25</span><span class="w">      </span><span class="p">],</span>
<span class="linenos">26</span><span class="w">      </span><span class="nt">&quot;workload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="linenos">27</span><span class="w">      </span><span class="nt">&quot;source_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="linenos">28</span><span class="w">      </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="linenos">29</span><span class="w">        </span><span class="s2">&quot;int_partitioning.c&quot;</span>
<span class="linenos">30</span><span class="w">      </span><span class="p">]</span>
<span class="linenos">31</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">32</span><span class="w">    </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;bounds&quot;</span>
<span class="linenos">33</span><span class="w">  </span><span class="p">},</span>
<span class="linenos">34</span><span class="w">  </span><span class="nt">&quot;resource_type_map&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">35</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:34:42#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">36</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">37</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">34</span><span class="p">,</span>
<span class="linenos">38</span><span class="w">        </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">42</span><span class="p">,</span>
<span class="linenos">39</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_partitioning.c&quot;</span><span class="p">,</span>
<span class="linenos">40</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;partitioning&quot;</span>
<span class="linenos">41</span><span class="w">      </span><span class="p">},</span>
<span class="hll"><span class="linenos">42</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local bound&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">43</span><span class="w">      </span><span class="nt">&quot;bound&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1 + max(0, (k + -1))&quot;</span><span class="p">,</span>
</span><span class="linenos">44</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span>
<span class="hll"><span class="linenos">45</span><span class="w">      </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;O(n^1)&quot;</span>
</span><span class="linenos">46</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">47</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:49:60#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">48</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">49</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">49</span><span class="p">,</span>
<span class="linenos">50</span><span class="w">        </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">60</span><span class="p">,</span>
<span class="linenos">51</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_partitioning.c&quot;</span><span class="p">,</span>
<span class="linenos">52</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;partitioning&quot;</span>
<span class="linenos">53</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">54</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local bound&quot;</span><span class="p">,</span>
<span class="linenos">55</span><span class="w">      </span><span class="nt">&quot;bound&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2 + max(0, (k + -1))&quot;</span><span class="p">,</span>
<span class="linenos">56</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span>
<span class="linenos">57</span><span class="w">      </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;O(n^1)&quot;</span>
<span class="linenos">58</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">59</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:64:69#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">60</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">61</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span>
<span class="linenos">62</span><span class="w">        </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">69</span><span class="p">,</span>
<span class="linenos">63</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_partitioning.c&quot;</span><span class="p">,</span>
<span class="linenos">64</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;partitioning&quot;</span>
<span class="linenos">65</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">66</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local bound&quot;</span><span class="p">,</span>
<span class="linenos">67</span><span class="w">      </span><span class="nt">&quot;bound&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;2 + max(0, (k + -1))&quot;</span><span class="p">,</span>
<span class="linenos">68</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span>
<span class="linenos">69</span><span class="w">      </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;O(n^1)&quot;</span>
<span class="linenos">70</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">71</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:18:4#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">72</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">73</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">18</span><span class="p">,</span>
<span class="linenos">74</span><span class="w">        </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="linenos">75</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_partitioning.c&quot;</span><span class="p">,</span>
<span class="linenos">76</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;partitioning&quot;</span>
<span class="linenos">77</span><span class="w">      </span><span class="p">},</span>
<span class="hll"><span class="linenos">78</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;total bound&quot;</span><span class="p">,</span>
</span><span class="hll"><span class="linenos">79</span><span class="w">      </span><span class="nt">&quot;bound&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;6 + 4 × max(0, (k + -1))&quot;</span><span class="p">,</span>
</span><span class="linenos">80</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span>
<span class="linenos">81</span><span class="w">      </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;O(n^1)&quot;</span>
<span class="linenos">82</span><span class="w">    </span><span class="p">},</span>
<span class="linenos">83</span><span class="w">    </span><span class="nt">&quot;int_partitioning.c:partitioning:55:58#0&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">84</span><span class="w">      </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="linenos">85</span><span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">55</span><span class="p">,</span>
<span class="linenos">86</span><span class="w">        </span><span class="nt">&quot;column&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">58</span><span class="p">,</span>
<span class="linenos">87</span><span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;int_partitioning.c&quot;</span><span class="p">,</span>
<span class="linenos">88</span><span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;partitioning&quot;</span>
<span class="linenos">89</span><span class="w">      </span><span class="p">},</span>
<span class="linenos">90</span><span class="w">      </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;local bound&quot;</span><span class="p">,</span>
<span class="linenos">91</span><span class="w">      </span><span class="nt">&quot;bound&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;1 + max(0, (k + -1))&quot;</span><span class="p">,</span>
<span class="linenos">92</span><span class="w">      </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.0&quot;</span><span class="p">,</span>
<span class="linenos">93</span><span class="w">      </span><span class="nt">&quot;class&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;O(n^1)&quot;</span>
<span class="linenos">94</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">95</span><span class="w">  </span><span class="p">}</span>
<span class="linenos">96</span><span class="p">}</span>
</pre></div>
</div>
<p>The above is an example of profiled data using the <cite>bounds</cite> with important regions and keys
highlighted. The bounds corresponds to the program listed below, which contains four highlighted
loops. For each loop we have a local bound that is represented as a ranking function based on input
function parameters. For each bound, we also list its class, i.e. the highest polynom of the ranking
function, or Big-O complexity. In case, the complexity cannot be inferred, the Loopus returns failure
and we report infinite bound, which is safe approximation. Each function then gets a cummulative total
bound, that represents the whole complexity of the function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kt">int</span><span class="w"> </span><span class="nf">partitioning</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">k</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="n">TList</span><span class="w"> </span><span class="o">*</span><span class="n">list</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="n">temp</span><span class="p">;</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">list_next_NULL</span><span class="p">;</span>
<span class="linenos"> 5</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">list_next_p</span><span class="p">;</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">p_next_NULL</span><span class="p">;</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x_next_NULL</span><span class="p">;</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">y_next_x</span><span class="p">;</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="n">list</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">TList</span><span class="p">));</span>
<span class="linenos">10</span><span class="w">    </span><span class="n">list</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="c1">// Create nondeterminstic list</span>
<span class="linenos">13</span><span class="w">    </span><span class="n">TList</span><span class="w"> </span><span class="o">*</span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="linenos">14</span><span class="w">    </span><span class="n">list_next_NULL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos">15</span><span class="w">    </span><span class="n">list_next_p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="hll"><span class="linenos">16</span><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">k</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos">17</span><span class="w">        </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">TList</span><span class="p">));</span>
<span class="linenos">18</span><span class="w">        </span><span class="n">temp</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span>
<span class="linenos">19</span><span class="w">        </span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<span class="linenos">20</span><span class="w">        </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">temp</span><span class="p">;</span>
<span class="linenos">21</span><span class="w">        </span><span class="n">list_next_NULL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list_next_p</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span>
<span class="linenos">22</span><span class="w">        </span><span class="n">list_next_p</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos">23</span><span class="w">        </span><span class="o">--</span><span class="n">k</span><span class="p">;</span>
<span class="linenos">24</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">    </span><span class="c1">// Traverse the list</span>
<span class="linenos">27</span><span class="w">    </span><span class="n">TList</span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="linenos">28</span><span class="w">    </span><span class="n">TList</span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="linenos">29</span><span class="w">    </span><span class="n">x_next_NULL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list_next_NULL</span><span class="p">;</span>
<span class="linenos">30</span><span class="w">    </span><span class="n">y_next_x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="hll"><span class="linenos">31</span><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">x_next_NULL</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos">32</span><span class="w">        </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="linenos">33</span><span class="w">        </span><span class="n">x_next_NULL</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos">34</span><span class="w">        </span><span class="n">y_next_x</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos">35</span><span class="w">        </span><span class="c1">// The end will always jump out</span>
<span class="linenos">36</span><span class="w">        </span><span class="k">if</span><span class="p">(</span><span class="n">NONDET</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="hll"><span class="linenos">37</span><span class="w">            </span><span class="k">while</span><span class="p">(</span><span class="n">y_next_x</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos">38</span><span class="w">                </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">y</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="linenos">39</span><span class="w">                </span><span class="n">y_next_x</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos">40</span><span class="w">            </span><span class="p">}</span>
<span class="linenos">41</span><span class="w">        </span><span class="p">}</span>
<span class="linenos">42</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">43</span>
<span class="linenos">44</span><span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list</span><span class="p">;</span>
<span class="linenos">45</span><span class="w">    </span><span class="n">p_next_NULL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">list_next_NULL</span><span class="p">;</span>
<span class="hll"><span class="linenos">46</span><span class="w">    </span><span class="k">while</span><span class="p">(</span><span class="n">p_next_NULL</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
</span><span class="linenos">47</span><span class="w">        </span><span class="n">temp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">;</span>
<span class="linenos">48</span><span class="w">        </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="o">-&gt;</span><span class="n">next</span><span class="p">;</span>
<span class="linenos">49</span><span class="w">        </span><span class="n">free</span><span class="p">(</span><span class="n">temp</span><span class="p">);</span>
<span class="linenos">50</span><span class="w">        </span><span class="n">p_next_NULL</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="linenos">51</span><span class="w">    </span><span class="p">}</span>
<span class="linenos">52</span>
<span class="linenos">53</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="linenos">54</span><span class="p">}</span>
<span class="linenos">55</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="creating-your-own-collector">
<span id="collectors-custom"></span><h2>Creating your own Collector<a class="headerlink" href="#creating-your-own-collector" title="Link to this heading">¶</a></h2>
<p>New collectors can be registered within Perun in several steps. Internally they can be implemented
in any programming language and in order to work with Perun requires three phases to be specified
as given in <a class="reference internal" href="#collectors-overview"><span class="std std-ref">Collectors Overview</span></a>—<code class="docutils literal notranslate"><span class="pre">before()</span></code>, <code class="docutils literal notranslate"><span class="pre">collect()</span></code> and <code class="docutils literal notranslate"><span class="pre">after()</span></code>. Each new
collector requires a interface module <code class="docutils literal notranslate"><span class="pre">run.py</span></code>, which contains the three functions and, moreover,
a cli API for <a class="reference external" href="http://click.pocoo.org/5/">Click</a>.</p>
<p>You can register your new collector as follows:</p>
<blockquote>
<div><ol class="arabic">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">utils</span> <span class="pre">create</span> <span class="pre">collect</span> <span class="pre">mycollector</span></code> to generate a new modules in
<code class="docutils literal notranslate"><span class="pre">perun/collect</span></code> directory with the following structure. The command takes a predefined
templates for new collectors and creates <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> and <code class="docutils literal notranslate"><span class="pre">run.py</span></code> according to the
supplied command line arguments (see <a class="reference internal" href="cli.html#cli-utils-ref"><span class="std std-ref">Utility Commands</span></a> for more information about
interface of <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">utils</span> <span class="pre">create</span></code> command):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">perun</span>
<span class="o">|--</span> <span class="o">/</span><span class="n">collect</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">mycollector</span>
        <span class="o">|--</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="o">|--</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">trace</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">memory</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">time</span>
    <span class="o">|--</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p>First, implement the <code class="docutils literal notranslate"><span class="pre">__init__.py</span></code> file, including the module docstring with brief
collector descriptions and definitions of constants that are used for automatic setting of
profiles (namely the <code class="xref std std-preg docutils literal notranslate"><span class="pre">collector-info</span></code>) which has the following structure:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="sd">&quot;&quot;&quot;...&quot;&quot;&quot;</span>
<span class="linenos">2</span>
<span class="linenos">3</span><span class="n">COLLECTOR_TYPE</span> <span class="o">=</span> <span class="s2">&quot;time|memory|mixed&quot;</span>
<span class="linenos">4</span><span class="n">COLLECTOR_DEFAULT_UNITS</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;unit&quot;</span><span class="p">}</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>Next, implement the <code class="docutils literal notranslate"><span class="pre">run.py</span></code> module with <code class="docutils literal notranslate"><span class="pre">collect()</span></code> function, (optionally with
<code class="docutils literal notranslate"><span class="pre">before()</span></code> and <code class="docutils literal notranslate"><span class="pre">after()</span></code>). The <code class="docutils literal notranslate"><span class="pre">collect()</span></code> function should do the actual collection of
the profiling data over the given configuration. Each function should return the integer
status of the phase, the status message (used in case of error) and dictionary including
params passed to additional phases and ‘profile’ with dictionary w.r.t <a class="reference internal" href="profile.html#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>.</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="linenos"> 2</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;(optional)&quot;&quot;&quot;</span>
<span class="linenos"> 3</span>    <span class="k">return</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">STATUS_MSG</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">def</span> <span class="nf">collect</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;...&quot;&quot;&quot;</span>
<span class="linenos"> 8</span>    <span class="k">return</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">STATUS_MSG</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="linenos">12</span><span class="w">    </span><span class="sd">&quot;&quot;&quot;(optional)&quot;&quot;&quot;</span>
<span class="linenos">13</span>    <span class="k">return</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">STATUS_MSG</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<ol class="arabic simple" start="4">
<li><p>Additionally implement the command line interface function in <code class="docutils literal notranslate"><span class="pre">run.py</span></code>, named the same as
your collector. This function will is called from command line as <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">collect</span>
<span class="pre">mycollector</span></code> and is based on <a class="reference external" href="http://click.pocoo.org/5/">Click</a> library.</p></li>
</ol>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gd">--- /home/runner/work/perun/perun/docs/_static/templates/collectors_run.py</span>
<span class="linenos"> 2</span><span class="gi">+++ /home/runner/work/perun/perun/docs/_static/templates/collectors_run_api.py</span>
<span class="linenos"> 3</span><span class="gu">@@ -1,3 +1,8 @@</span>
<span class="linenos"> 4</span><span class="gi">+import click</span>
<span class="linenos"> 5</span><span class="gi">+</span>
<span class="linenos"> 6</span><span class="gi">+import perun.logic.runner as runner</span>
<span class="linenos"> 7</span><span class="gi">+</span>
<span class="linenos"> 8</span><span class="gi">+</span>
<span class="linenos"> 9</span><span class="w"> </span>def before(**kwargs):
<span class="linenos">10</span><span class="w"> </span>    &quot;&quot;&quot;(optional)&quot;&quot;&quot;
<span class="linenos">11</span><span class="w"> </span>    return STATUS, STATUS_MSG, dict(kwargs)
<span class="linenos">12</span><span class="gu">@@ -11,3 +16,10 @@</span>
<span class="linenos">13</span><span class="w"> </span>def after(**kwargs):
<span class="linenos">14</span><span class="w"> </span>    &quot;&quot;&quot;(optional)&quot;&quot;&quot;
<span class="linenos">15</span><span class="w"> </span>    return STATUS, STATUS_MSG, dict(kwargs)
<span class="linenos">16</span><span class="gi">+</span>
<span class="linenos">17</span><span class="gi">+</span>
<span class="linenos">18</span><span class="gi">+@click.command()</span>
<span class="linenos">19</span><span class="gi">+@click.pass_context</span>
<span class="linenos">20</span><span class="gi">+def mycollector(ctx, **kwargs):</span>
<span class="linenos">21</span><span class="gi">+    &quot;&quot;&quot;...&quot;&quot;&quot;</span>
<span class="linenos">22</span><span class="gi">+    runner.run_collector_from_cli_context(ctx, &quot;mycollector&quot;, kwargs)</span>
</pre></div>
</div>
<ol class="arabic simple" start="5">
<li><p>Finally register your newly created module in <code class="xref py py-func docutils literal notranslate"><span class="pre">get_supported_module_names()</span></code> located in
<code class="docutils literal notranslate"><span class="pre">perun.utils.__init__.py</span></code>:</p></li>
</ol>
<div class="highlight-udiff notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="gd">--- /home/runner/work/perun/perun/docs/_static/templates/supported_module_names.py</span>
<span class="linenos"> 2</span><span class="gi">+++ /home/runner/work/perun/perun/docs/_static/templates/supported_module_names_collectors.py</span>
<span class="linenos"> 3</span><span class="gu">@@ -6,7 +6,7 @@</span>
<span class="linenos"> 4</span><span class="w"> </span>        )
<span class="linenos"> 5</span><span class="w"> </span>    return {
<span class="linenos"> 6</span><span class="w"> </span>        &quot;vcs&quot;: [&quot;git&quot;],
<span class="linenos"> 7</span><span class="gd">-        &quot;collect&quot;: [&quot;trace&quot;, &quot;memory&quot;, &quot;time&quot;],</span>
<span class="linenos"> 8</span><span class="gi">+        &quot;collect&quot;: [&quot;trace&quot;, &quot;memory&quot;, &quot;time&quot;, &quot;mycollector&quot;],</span>
<span class="linenos"> 9</span><span class="w"> </span>        &quot;postprocess&quot;: [&quot;filter&quot;, &quot;normalizer&quot;, &quot;regression-analysis&quot;],
<span class="linenos">10</span><span class="w"> </span>        &quot;view&quot;: [
<span class="linenos">11</span><span class="w"> </span>            &quot;alloclist&quot;,
</pre></div>
</div>
<ol class="arabic" start="6">
<li><p>Preferably, verify that registering did not break anything in the Perun and if you are not
using the developer installation, then reinstall Perun:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">test</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p>At this point you can start using your collector either using <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">collect</span></code> or using the
following to set the job matrix and run the batch collection of profiles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">perun</span> <span class="n">config</span> <span class="o">--</span><span class="n">edit</span>
<span class="n">perun</span> <span class="n">run</span> <span class="n">matrix</span>
</pre></div>
</div>
</li>
<li><p>If you think your collector could help others, please, consider making <a class="reference external" href="https://github.com/tfiedor/perun/pull/new/develop">Pull Request</a>.</p></li>
</ol>
</div></blockquote>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="index.html">
    <h3>Perun</h3>
  </a>
</p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Collectors Overview</a><ul>
<li><a class="reference internal" href="#supported-collectors">Supported Collectors</a><ul>
<li><a class="reference internal" href="#module-perun.collect.trace">Trace Collector</a><ul>
<li><a class="reference internal" href="#overview-and-command-line-interface">Overview and Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-collect-trace">perun collect trace</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.collect.memory">Memory Collector</a><ul>
<li><a class="reference internal" href="#id2">Overview and Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-collect-memory">perun collect memory</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collectors-memory-examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.collect.time">Time Collector</a><ul>
<li><a class="reference internal" href="#id4">Overview and Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-collect-time">perun collect time</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collectors-time-examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.collect.bounds">Bounds Collector</a><ul>
<li><a class="reference internal" href="#id6">Overview and Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-collect-bounds">perun collect bounds</a></li>
</ul>
</li>
<li><a class="reference internal" href="#collectors-bounds-examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#creating-your-own-collector">Creating your own Collector</a></li>
</ul>
</li>
</ul>

  </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="cli.html" title="previous chapter">Command Line Interface</a></li>
      <li>Next: <a href="postprocessors.html" title="next chapter">Postprocessors Overview</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/collectors.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Tomas Fiedor, Jiri Pavela, Simon Stupinsky, et al..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/collectors.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>