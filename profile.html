<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Perun’s Profile Format &#8212; Perun 0.21.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/perun.css?v=25c05b3f" />
    <script src="_static/documentation_options.js?v=6081af2d"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Command Line Interface" href="cli.html" />
    <link rel="prev" title="Perun: Performance Under Control" href="overview.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="perun-s-profile-format">
<span id="profile-format"></span><h1>Perun’s Profile Format<a class="headerlink" href="#perun-s-profile-format" title="Link to this heading">¶</a></h1>
<p>Supported format is based on <a class="reference external" href="https://www.json.org/">JSON</a> with several restrictions regarding the keys (or regions) that
needs to be defined inside. The intuition of <a class="reference external" href="https://www.json.org/">JSON</a>-like notation usage stems from its human
readability and well-established support in leading programming languages (namely Python and
JavaScript). Note, that however, the current version of format may generate huge profiles for some
collectors, since it can contain redundancies. We are currently exploring several techniques to
reduce the size of the profile.</p>
<a class="reference internal image-reference" href="_images/lifetime-of-profile.svg"><img alt="_images/lifetime-of-profile.svg" class="align-center" src="_images/lifetime-of-profile.svg" width="70%" /></a>
<p>The scheme above shows the basic lifetime of one profile. Performance profiles are generated by
units called collectors (or profilers). One can either generate the profiles by its own methods or
use one of the collectors from Perun’s tool suite (see <a class="reference internal" href="collectors.html#collectors-list"><span class="std std-ref">Supported Collectors</span></a> for list of supported
collectors). Generated profile can then be postprocessed multiple times using postprocessing units
(see <a class="reference internal" href="postprocessors.html#postprocessors-list"><span class="std std-ref">Supported Postprocessors</span></a> for list of supported postprocessors), in order to e.g. normalize
the values. Once you are finished with the profiles, you can store it in the persistent storage
(see <a class="reference internal" href="internals.html#internals-overview"><span class="std std-ref">Perun Internals</span></a> for details how profiles are stored), where it will be compressed
and assigned to appropriate minor version origin, e.g. concrete commit. Both stored and freshly
generated profiles can be interpreted by various visualization techniques (see <a class="reference internal" href="views.html#views-list"><span class="std std-ref">Supported Visualizations</span></a>
for list of visualization techniques).</p>
<section id="specification-of-profile-format">
<span id="profile-spec"></span><h2>Specification of Profile Format<a class="headerlink" href="#specification-of-profile-format" title="Link to this heading">¶</a></h2>
<p>The generic scheme of the format can be simplified in the following regions.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;collector_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span>
<span class="w">    </span><span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">&quot;snapshots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span>
<span class="w">    </span><span class="nt">&quot;chunks&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</pre></div>
</div>
<p><cite>Chunks</cite> region is currently in development, and is optional. <cite>Snapshots</cite> region contains the
actual collected resources  and can be changed through the further postprocessing phases, like e.g.
by <a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>. List of postprocessors specified in <cite>postprocessors</cite>
region can be updated by subsequent postprocessing analyses. Finally the <cite>origin</cite> region is only
present in non-assigned profiles. In the following we will decribe the regions in more details.</p>
<dl class="std perfreg">
<dt class="sig sig-object std" id="perfreg-origin">
<span class="sig-name descname"><span class="pre">origin</span></span><a class="headerlink" href="#perfreg-origin" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;origin&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;f7f3dcea69b97f2b03c421a223a770917149cfae&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Origin specifies the concrete minor version to which the profile corresponds. This key is present
only, when the profile is not yet assigned in the control system. Such profile is usually found in
<cite>.perun/jobs</cite> directory. Before storing the profile in persistent storage, <cite>origin</cite> is removed and
serves as validation that we are not assigning profiles to different minor versions. Assigning of
profiles corresponding to different minor versions would naturally screw with the project history.</p>
<p>The example region above specifies, that the profile corresponded to a minor version <cite>f7f3dc</cite> and
thus links the resources to the changes of this commit.</p>
<dl class="std perfreg">
<dt class="sig sig-object std" id="perfreg-header">
<span class="sig-name descname"><span class="pre">header</span></span><a class="headerlink" href="#perfreg-header" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;header&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;units&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;s&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="nt">&quot;cmd&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;perun&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;args&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;status&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;workload&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;--short&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Header is a key-value dictionary containing basic specification of the profile, like e.g. rough
type of the performance profile, the actual command which was profiled, its parameters and input
workload (giving full project configuration). The following keys are included in this region:</p>
<p>The example above shows header of <cite>time</cite> profile, with resources measured in seconds. The profiled
command was <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">status</span> <span class="pre">--short</span></code>, which was broken down to a command <code class="docutils literal notranslate"><span class="pre">perun</span></code>, with parameter
<code class="docutils literal notranslate"><span class="pre">status</span></code> and other parameter <code class="docutils literal notranslate"><span class="pre">--short</span></code> was considered to be workload (note that the definition
of workloads can vary and be used in different context).</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-type">
<span class="sig-name descname"><span class="pre">type</span></span><a class="headerlink" href="#perfkey-type" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Specifies rough type of the performance profile. Currently Perun consideres <cite>time</cite>, <cite>mixed</cite> and
<cite>memory</cite>. We further plan to expand the list of choices to include e.g. <cite>network</cite>, <cite>filesystem</cite> or
<cite>utilization</cite> profile types.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-units">
<span class="sig-name descname"><span class="pre">units</span></span><a class="headerlink" href="#perfkey-units" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Map of types (and possible subtypes) of resources to their used metric units. Note that collector
should guarantee that resources are unified in units. E.g. <cite>time</cite> can be measured in <cite>s</cite> or <cite>ms</cite>,
<cite>memory</cite> of subtype <cite>malloc</cite> can be measured in <cite>B</cite> or <cite>kB</cite>, read/write thoroughput can be measured
in <cite>kB/s</cite>, etc.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-cmd">
<span class="sig-name descname"><span class="pre">cmd</span></span><a class="headerlink" href="#perfkey-cmd" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Specifies the command which was profiled and yielded the generated the profile. This can be either
some script (e.g. <code class="docutils literal notranslate"><span class="pre">perun</span></code>), some command (e.g. <code class="docutils literal notranslate"><span class="pre">ls</span></code>), or execution of binary (e.g. <code class="docutils literal notranslate"><span class="pre">./out</span></code>.
In general this corresponds to a profiled application. Note, that some collectors are working with
their own binaries and thus do not require the command to be specified at all (like e.g.
<a class="reference internal" href="collectors.html#collectors-trace"><span class="std std-ref">Trace Collector</span></a> and will thus omit the actual usage of the command), however, this key
can still be used e.g. for tagging the profiles.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-args">
<span class="sig-name descname"><span class="pre">args</span></span><a class="headerlink" href="#perfkey-args" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Specifies list of arguments (or parameters) for command <a class="reference internal" href="#perfkey-cmd"><em class="xref std std-pkey">cmd</em></a>. This is used for more fine
distinguishing of profiles regarding its parameters (e.g. when we run command with different
optimizations, etc.). E.g. if take <code class="docutils literal notranslate"><span class="pre">ls</span></code> command as an example, <code class="docutils literal notranslate"><span class="pre">-al</span></code> can be considered as
parameter. This key is optional, can be empty string.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-workload">
<span class="sig-name descname"><span class="pre">workload</span></span><a class="headerlink" href="#perfkey-workload" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Similarly to parameters, workloads refer to a different inputs that are supplied to profiled
command with given arguments. E.g. when one profiles text processing application, workload will
refer to a concrete text files that are used to profile the application. In case of the <code class="docutils literal notranslate"><span class="pre">ls</span> <span class="pre">-al</span></code>
command with parameters, <code class="docutils literal notranslate"><span class="pre">/</span></code> or <code class="docutils literal notranslate"><span class="pre">./subdir</span></code> can be considered as workloads. This key is
optional, can be empty string.</p>
<dl class="std perfreg">
<dt class="sig sig-object std" id="perfreg-collector_info">
<span class="sig-name descname"><span class="pre">collector_info</span></span><a class="headerlink" href="#perfreg-collector_info" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;collector_info&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;complexity&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;sampling&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;func&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_insert&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;sample&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;internal_direct_output&quot;</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;internal_storage_size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">20000</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;files&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;../example_sources/simple_sll_cpp/main.cpp&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;../example_sources/simple_sll_cpp/SLList.h&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;../example_sources/simple_sll_cpp/SLListcls.h&quot;</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;target_dir&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;./target&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;rules&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="s2">&quot;SLList_init&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;SLList_insert&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="s2">&quot;SLList_search&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="p">]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Collector info contains configuration of the collector, which was used to capture resources and
generate the profile.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-collector_info.name">
<span class="sig-name descname"><span class="pre">collector_info.name</span></span><a class="headerlink" href="#perfkey-collector_info.name" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>Name of the collector (or profiler), which was used to generate the profile. This is used e.g. in
displaying the list of the registered and unregistered profiles in <code class="docutils literal notranslate"><span class="pre">perun</span> <span class="pre">status</span></code>, in order to
differentiate between profiles collected by different profilers.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-collector_info.params">
<span class="sig-name descname"><span class="pre">collector_info.params</span></span><a class="headerlink" href="#perfkey-collector_info.params" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>The configuration of the collector in the form of <cite>(key, value)</cite> dictionary.</p>
<p>The example above lists the configuration of <a class="reference internal" href="collectors.html#collectors-trace"><span class="std std-ref">Trace Collector</span></a> (for full specification
of parameters refer to <a class="reference internal" href="collectors.html#collectors-trace-cli"><span class="std std-ref">Overview and Command Line Interface</span></a>). This configurations e.g. specifies, that
the list of <cite>files</cite> will be compiled into the <cite>target_dir</cite> with custom Makefile and these sources
will be used create a new binary for the project (prepared for profiling), which will profile
function specified by <cite>rules</cite> w.r.t specified <cite>sampling</cite>.</p>
<dl class="std perfreg">
<dt class="sig sig-object std" id="perfreg-postprocessors">
<span class="sig-name descname"><span class="pre">postprocessors</span></span><a class="headerlink" href="#perfreg-postprocessors" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;regression_analysis&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;params&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;full&quot;</span><span class="p">,</span>
<span class="w">                </span><span class="nt">&quot;models&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                    </span><span class="s2">&quot;constant&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="s2">&quot;quadratic&quot;</span>
<span class="w">                </span><span class="p">]</span>
<span class="w">            </span><span class="p">},</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="p">}</span>
</pre></div>
</div>
<p>List of configurations of postprocessing units in order they were applied to the profile (with keys
analogous to <a class="reference internal" href="#perfreg-collector_info"><code class="xref std std-preg docutils literal notranslate"><span class="pre">collector_info</span></code></a>).</p>
<p>The example above specifies list with one postprocessor, namely the
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a> (for full specification refer to
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis-cli"><span class="std std-ref">Command Line Interface</span></a>). This configuration applied regression analysis and
using full <cite>method</cite> fully computed models for constant, linear and quadratic <cite>models</cite>.</p>
<dl class="std perfreg">
<dt class="sig sig-object std" id="perfreg-snapshots">
<span class="sig-name descname"><span class="pre">snapshots</span></span><a class="headerlink" href="#perfreg-snapshots" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;snapshots&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.025000&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;malloc&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">19284560</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;trace&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;models&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">},</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;time&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;0.050000&quot;</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;resources&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                </span><span class="p">{</span>
<span class="w">                    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;free&quot;</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;address&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">19284560</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">                    </span><span class="nt">&quot;trace&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">                        </span><span class="p">{</span>
<span class="w">                            </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">                            </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span>
<span class="w">                        </span><span class="p">},</span>
<span class="w">                    </span><span class="p">],</span>
<span class="w">                    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">                        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">                        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span>
<span class="w">                    </span><span class="p">}</span>
<span class="w">                </span><span class="p">},</span>
<span class="w">            </span><span class="p">],</span>
<span class="w">            </span><span class="nt">&quot;models&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[]</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">    </span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
<p><cite>Snapshots</cite> contains the list of actual resources that were collected by the specified collector
(<a class="reference internal" href="#perfkey-collector_info.name"><em class="xref std std-pkey">collector_info.name</em></a>). Each snapshot is represented by its <cite>time</cite>, list of captured
<cite>resources</cite> and optionally list of <cite>models</cite> (refer to <a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a> for
more details). The actual specification of resources varies w.r.t to used collectors.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-time">
<span class="sig-name descname"><span class="pre">time</span></span><a class="headerlink" href="#perfkey-time" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><cite>Time</cite> specifies the timestamp of the given snapshot. The example above contains two snapshots,
first captured after 0.025s and other after 0.05s of running time.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-resources">
<span class="sig-name descname"><span class="pre">resources</span></span><a class="headerlink" href="#perfkey-resources" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p><cite>Resources</cite> contains list of captured profiling data. Their actual format varies, and is rather
flexible. In order to model the actual amount of resources, we advise to use <cite>amount</cite> key to
quantify the size of given metric and use <cite>type</cite> (and possible <cite>subtype</cite>) in order to link
resources to appropriate metric units.</p>
<p>The resources above were collected by <a class="reference internal" href="collectors.html#collectors-memory"><span class="std std-ref">Memory Collector</span></a>, where <cite>amount</cite> specifies the number
of bytes allocated of given memory <cite>subtype</cite> at given <cite>address</cite> by specified <cite>trace</cite> of functions.
The first snapshot contains one resources corresponding ot <cite>4B</cite> of memory allocated by <cite>malloc</cite> in
function <cite>main</cite> on line <cite>22</cite> in <cite>memory_collect_test.c</cite> file. The other snapshots contains record
of deallocation of the given resource by <cite>free</cite>.</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.59</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;sys&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These resources were collected by <a class="reference internal" href="collectors.html#collectors-time"><span class="std std-ref">Time Collector</span></a>, where <cite>amount</cite> specifies the sys time of
the profile application (as obtained by <code class="docutils literal notranslate"><span class="pre">time</span></code> utility).</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;subtype&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;mixed&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_init(SLList*)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These resources were collected by <a class="reference internal" href="collectors.html#collectors-trace"><span class="std std-ref">Trace Collector</span></a>. <cite>Amount</cite> here represents the
difference between calling and returning the function <cite>uid</cite> in miliseconds, on structure of size
given by <cite>structure-unit-size</cite>. Note that these resources are suitable for
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>.</p>
<dl class="std perfkey">
<dt class="sig sig-object std" id="perfkey-models">
<span class="sig-name descname"><span class="pre">models</span></span><a class="headerlink" href="#perfkey-models" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;r_square&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.0017560012128507133</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;coeffs&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">[</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">0.505375215875552</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b0&quot;</span>
<span class="w">        </span><span class="p">},</span>
<span class="w">        </span><span class="p">{</span>
<span class="w">            </span><span class="nt">&quot;value&quot;</span><span class="p">:</span><span class="w"> </span><span class="mf">9.935159839322705e-06</span><span class="p">,</span>
<span class="w">            </span><span class="nt">&quot;name&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;b1&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">],</span>
<span class="w">    </span><span class="nt">&quot;x_start&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;x_end&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">11892</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;model&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;linear&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;method&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;full&quot;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p><cite>Models</cite> is a list of models obtained by <a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>. Note that the
ordering of models in the list has no meaning at all. The model above corresponds to behaviour of
the function <code class="docutils literal notranslate"><span class="pre">SLList_insert</span></code>, and corresponds to a linear function of <span class="math notranslate nohighlight">\(amount = b_0 + b_1 *
size\)</span> (where size corresponds to the <cite>structure-unit-size</cite> key of the resource) on interval
<span class="math notranslate nohighlight">\((0, 11892)\)</span>. Hence, we can estimate the complexity of function <code class="docutils literal notranslate"><span class="pre">SLList_insert</span></code> to be
linear.</p>
<dl class="std perfreg">
<dt class="sig sig-object std" id="perfreg-chunks">
<span class="sig-name descname"><span class="pre">chunks</span></span><a class="headerlink" href="#perfreg-chunks" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p>This region is currently in proposal. <cite>Chunks</cite> are meant to be a look-up table which maps unique
identifiers to a larger portions of <a class="reference external" href="https://www.json.org/">JSON</a> regions. Since lots of informations are repeated through
the profile (e.g. the <cite>traces</cite> in <a class="reference internal" href="collectors.html#collectors-memory"><span class="std std-ref">Memory Collector</span></a>), replacing such regions with reference
to the look-up table should greatly reduce the size of profiles.</p>
</section>
<section id="module-perun.profile.helpers">
<span id="id1"></span><span id="profile-api"></span><h2>Profile API<a class="headerlink" href="#module-perun.profile.helpers" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">perun.profile.factory</span></code> specifies collective interface for basic
manipulation with profiles.</p>
<p>The format of profiles is w.r.t. <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>. This module contains
helper functions for loading and storing of the profiles either in the
persistent memory or in filesystem (in this case, the profile is in
uncompressed format).</p>
<p>For further manipulations refer either to <a class="reference internal" href="#profile-conversion-api"><span class="std std-ref">Profile Conversions API</span></a>
(implemented in <code class="docutils literal notranslate"><span class="pre">perun.profile.convert</span></code> module) or <a class="reference internal" href="#profile-query-api"><span class="std std-ref">Profile Query API</span></a>
(implemented in <code class="docutils literal notranslate"><span class="pre">perun.profile.query</span> <span class="pre">module</span></code>). For full specification how to
handle the JSON objects in Python refer to <a class="reference external" href="https://docs.python.org/3.7/library/json.html">Python JSON library</a>.</p>
<p id="module-perun.profile.factory">Profile factory optimizes the previous profile format</p>
<p>In particular, in the new format we propose to merge some regions into
so called resource types, which are dictionaries of persistent less
frequently changed aspects of resources. Moreover, we optimize other
regions and flatten the format.</p>
<dl class="py class">
<dt class="sig sig-object py" id="perun.profile.factory.Profile">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">perun.profile.factory.</span></span><span class="sig-name descname"><span class="pre">Profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Any</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/perun/profile/factory.html#Profile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.factory.Profile" title="Link to this definition">¶</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Variables<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>_storage</strong> (<em>dict</em>) – internal storage of the profile</p></li>
<li><p><strong>_tuple_to_resource_type_map</strong> (<em>dict</em>) – map of tuple of persistent records of resources to
unique identifier of those resources</p></li>
<li><p><strong>_uid_counter</strong> (<em>Counter</em>) – counter of how many resources type uid has</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="perun.profile.factory.Profile.all_filtered_models">
<span class="sig-name descname"><span class="pre">all_filtered_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">models_strategy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">ModelRecord</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/factory.html#Profile.all_filtered_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.factory.Profile.all_filtered_models" title="Link to this definition">¶</a></dt>
<dd><p>The function obtains models according to the given strategy.</p>
<p>This function according to the given strategy and group derived from it
obtains the models from the current profile. The function creates the
relevant dictionary with required models or calls the responded functions,
that returns the models according to the specifications.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>models_strategy</strong> (<em>str</em>) – name of detection models strategy to obtains relevant models</p>
</dd>
<dt class="field-even">Return ModelRecord<span class="colon">:</span></dt>
<dd class="field-even"><p>required models</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="perun.profile.factory.Profile.all_models">
<span class="sig-name descname"><span class="pre">all_models</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">group</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'model'</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/factory.html#Profile.all_models"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.factory.Profile.all_models" title="Link to this definition">¶</a></dt>
<dd><p>Generator of all ‘models’ records from the performance profile w.r.t.
<a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>.</p>
<p>Form a profile, postprocessed by e.g. <a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>
and iterates through all of its models (for more details about models refer
to <a class="reference internal" href="#perfkey-models"><em class="xref std std-pkey">models</em></a> or <a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>).</p>
<p>E.g. given some trace profile <code class="docutils literal notranslate"><span class="pre">complexity_prof</span></code>, we can iterate its
models as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">gen</span> <span class="o">=</span> <span class="n">complexity_prof</span><span class="o">.</span><span class="n">all_models</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gen</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
<span class="go">(0, {&#39;x_start&#39;: 0, &#39;model&#39;: &#39;constant&#39;, &#39;method&#39;: &#39;full&#39;,</span>
<span class="go">&#39;coeffs&#39;: [{&#39;name&#39;: &#39;b0&#39;, &#39;value&#39;: 0.5644496762801648}, {&#39;name&#39;: &#39;b1&#39;,</span>
<span class="go">&#39;value&#39;: 0.0}], &#39;uid&#39;: &#39;SLList_insert(SLList*, int)&#39;, &#39;r_square&#39;: 0.0,</span>
<span class="go">&#39;x_end&#39;: 11892})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">gen</span><span class="o">.</span><span class="fm">__next__</span><span class="p">()</span>
<span class="go">(1, {&#39;x_start&#39;: 0, &#39;model&#39;: &#39;exponential&#39;, &#39;method&#39;: &#39;full&#39;,</span>
<span class="go">&#39;coeffs&#39;: [{&#39;name&#39;: &#39;b0&#39;, &#39;value&#39;: 0.9909792049684152}, {&#39;name&#39;: &#39;b1&#39;,</span>
<span class="go">&#39;value&#39;: 1.000004056250301}], &#39;uid&#39;: &#39;SLList_insert(SLList*, int)&#39;,</span>
<span class="go">&#39;r_square&#39;: 0.007076437903106431, &#39;x_end&#39;: 11892})</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>group</strong> (<em>str</em>) – the kind of requested models to return</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of <code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">dict)</span></code> pairs, where first yields the
positional number of model and latter correponds to one ‘models’
record (for more details about models refer to <a class="reference internal" href="#perfkey-models"><em class="xref std std-pkey">models</em></a> or
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>)</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="perun.profile.factory.Profile.all_resources">
<span class="sig-name descname"><span class="pre">all_resources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flatten_values</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/factory.html#Profile.all_resources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.factory.Profile.all_resources" title="Link to this definition">¶</a></dt>
<dd><p>Generator for iterating through all the resources contained in the
performance profile.</p>
<p>Generator iterates through all the snapshots, and subsequently yields
collected resources. For more thorough description of format of resources
refer to <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a>. Resources are not flattened and, thus, can
contain nested dictionaries (e.g. for <cite>traces</cite> or <cite>uids</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>flatten_values</strong> (<em>bool</em>) – if set to true, then the persistent values will
be flattened to one level.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of resources represented as pair <code class="docutils literal notranslate"><span class="pre">(int,</span> <span class="pre">dict)</span></code>
of snapshot number and the resources w.r.t. the specification of the
<a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="perun.profile.factory.Profile.all_snapshots">
<span class="sig-name descname"><span class="pre">all_snapshots</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/factory.html#Profile.all_snapshots"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.factory.Profile.all_snapshots" title="Link to this definition">¶</a></dt>
<dd><p>Iterates through all the snapshots in resources</p>
<p>Note this is required e.g. for heap map, which needs to group the resources by
snapshots.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>iterable of snapshot numbers and snapshot resources</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
<section id="module-perun.profile.convert">
<span id="profile-conversions-api"></span><span id="profile-conversion-api"></span><h2>Profile Conversions API<a class="headerlink" href="#module-perun.profile.convert" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">perun.profile.convert</span></code> is a module which specifies interface for
conversion of profiles from <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a> to other formats.</p>
<p>Run the following in the Python interpreter to extend the capabilities of
Python to different formats of profiles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">perun.profile.convert</span>
</pre></div>
</div>
<p>Combined with <code class="docutils literal notranslate"><span class="pre">perun.profile.factory</span></code>, <code class="docutils literal notranslate"><span class="pre">perun.profile.query</span></code> and e.g.
<a class="reference external" href="https://pandas.pydata.org/">pandas</a> library one can obtain efficient interpreter for executing more
complex queries and statistical tests over the profiles.</p>
<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.convert.resources_to_pandas_dataframe">
<span class="sig-prename descclassname"><span class="pre">perun.profile.convert.</span></span><span class="sig-name descname"><span class="pre">resources_to_pandas_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><span class="pre">Profile</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">pandas.DataFrame</span></span></span><a class="reference internal" href="_modules/perun/profile/convert.html#resources_to_pandas_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.convert.resources_to_pandas_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Converts the profile (w.r.t <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>) to format supported by
<a class="reference external" href="https://pandas.pydata.org/">pandas</a> library.</p>
<p>Queries through all of the resources in the <cite>profile</cite>, and flattens each
key and value to the tabular representation. Refer to <a class="reference external" href="https://pandas.pydata.org/">pandas</a> library for
more possibilities how to work with the tabular representation of collected
resources.</p>
<p>E.g. given <cite>time</cite> and <cite>memory</cite> profiles <code class="docutils literal notranslate"><span class="pre">tprof</span></code> and <code class="docutils literal notranslate"><span class="pre">mprof</span></code>
respectively, one can obtain the following formats:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span><span class="o">.</span><span class="n">resources_to_pandas_dataframe</span><span class="p">(</span><span class="n">tprof</span><span class="p">)</span>
<span class="go">   amount  snapshots   uid</span>
<span class="go">0  0.616s          0  real</span>
<span class="go">1  0.500s          0  user</span>
<span class="go">2  0.125s          0   sys</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">convert</span><span class="o">.</span><span class="n">resources_to_pandas_dataframe</span><span class="p">(</span><span class="n">mmprof</span><span class="p">)</span>
<span class="go">    address  amount  snapshots subtype                   trace    type</span>
<span class="go">0  19284560       4          0  malloc  malloc:unreachabl...  memory</span>
<span class="go">1  19284560       0          0    free  free:unreachable:...  memory</span>

<span class="go">                  uid uid:function  uid:line                 uid:source</span>
<span class="go">0  main:../memo...:22         main        22   ../memory_collect_test.c</span>
<span class="go">1  main:../memo...:27         main        27   ../memory_collect_test.c</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>profile</strong> (<a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><em>Profile</em></a>) – dictionary with profile w.r.t. <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>converted profile to <code class="docutils literal notranslate"><span class="pre">pandas.DataFramelist</span></code> with resources
flattened as a pandas dataframe</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.convert.to_flame_graph_format">
<span class="sig-prename descclassname"><span class="pre">perun.profile.convert.</span></span><span class="sig-name descname"><span class="pre">to_flame_graph_format</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><span class="pre">Profile</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/convert.html#to_flame_graph_format"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.convert.to_flame_graph_format" title="Link to this definition">¶</a></dt>
<dd><p>Transforms the <strong>memory</strong> profile w.r.t. <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a> into the
format supported by perl script of Brendan Gregg.</p>
<p><a class="reference internal" href="views.html#views-flame-graph"><span class="std std-ref">Flame Graph</span></a> can be used to visualize the inclusive consumption
of resources w.r.t. the call trace of the resource. It is useful for fast
detection, which point at the trace is the hotspot (or bottleneck) in the
computation. Refer to <a class="reference internal" href="views.html#views-flame-graph"><span class="std std-ref">Flame Graph</span></a> for full capabilities of our
Wrapper. For more information about flame graphs itself, please check
<a class="reference external" href="http://www.brendangregg.com/index.html">Brendan Gregg’s homepage</a>.</p>
<p>Example of format is as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">convert</span><span class="o">.</span><span class="n">to_flame_graph_format</span><span class="p">(</span><span class="n">memprof</span><span class="p">)))</span>
<span class="go">malloc()~unreachable~0;main()~/home/user/dev/test.c~45 4</span>
<span class="go">valloc()~unreachable~0;main()~/home/user/dev/test.c~75;__libc_start_main()~unreachable~0 8</span>
<span class="go">main()~/home/user/dev/test02.c~79 156</span>
</pre></div>
</div>
<p>Each line corresponds to some collected resource (in this case amount of
allocated memory) preceeded by its trace (i.e. functions or other unique
identifiers joined using <code class="docutils literal notranslate"><span class="pre">;</span></code> character.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>profile</strong> (<a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><em>Profile</em></a>) – the memory profile</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>list of lines, each representing one allocation call stack</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.convert.plot_data_from_coefficients_of">
<span class="sig-prename descclassname"><span class="pre">perun.profile.convert.</span></span><span class="sig-name descname"><span class="pre">plot_data_from_coefficients_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">model</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/convert.html#plot_data_from_coefficients_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.convert.plot_data_from_coefficients_of" title="Link to this definition">¶</a></dt>
<dd><p>Transform coefficients computed by
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a> into dictionary of points,
plotable as a function or curve. This function serves as a public wrapper
over regression analysis transformation function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>model</strong> (<em>dict</em>) – the models dictionary from profile (refer to
<a class="reference internal" href="#perfkey-models"><em class="xref std std-pkey">models</em></a>)</p>
</dd>
<dt class="field-even">Returns dict<span class="colon">:</span></dt>
<dd class="field-even"><p>updated models dictionary extended with <cite>plot_x</cite> and
<cite>plot_y</cite> lists</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-perun.profile.query">
<span id="id2"></span><span id="profile-query-api"></span><h2>Profile Query API<a class="headerlink" href="#module-perun.profile.query" title="Link to this heading">¶</a></h2>
<p><code class="docutils literal notranslate"><span class="pre">perun.profile.query</span></code> is a module which specifies interface for issuing
queries over the profiles w.r.t <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>.</p>
<p>Run the following in the Python interpreter to extend the capabilities of
profile to query over profiles, iterate over resources or models, etc.:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">perun.profile.query</span>
</pre></div>
</div>
<p>Combined with <code class="docutils literal notranslate"><span class="pre">perun.profile.factory</span></code>, <code class="docutils literal notranslate"><span class="pre">perun.profile.convert</span></code> and e.g.
<a class="reference external" href="https://docs.python.org/3.7/library/json.html">Pandas library</a> one can obtain efficient interpreter for executing more
complex queries and statistical tests over the profiles.</p>
<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.query.all_items_of">
<span class="sig-prename descclassname"><span class="pre">perun.profile.query.</span></span><span class="sig-name descname"><span class="pre">all_items_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/query.html#all_items_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.query.all_items_of" title="Link to this definition">¶</a></dt>
<dd><p>Generator for iterating through all of the flattened items contained
inside the resource w.r.t <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a> specification.</p>
<p>Generator iterates through all of the items contained in the <cite>resource</cite> in
flattened form (i.e. it does not contain nested dictionaries). Resources
should be w.r.t <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a> specification.</p>
<p>E.g. the following resource:</p>
<div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="w">    </span><span class="nt">&quot;type&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;memory&quot;</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;amount&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span>
<span class="w">    </span><span class="nt">&quot;uid&quot;</span><span class="p">:</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nt">&quot;source&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;../memory_collect_test.c&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;function&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;main&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="nt">&quot;line&quot;</span><span class="p">:</span><span class="w"> </span><span class="mi">22</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>yields the following stream of resources:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">,</span> <span class="s2">&quot;memory&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s2">&quot;amount&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="p">(</span><span class="s2">&quot;uid&quot;</span><span class="p">,</span> <span class="s2">&quot;../memory_collect_test.c:main:22&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s2">&quot;uid:source&quot;</span><span class="p">,</span> <span class="s2">&quot;../memory_collect_test.c&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s2">&quot;uid:function&quot;</span><span class="p">,</span> <span class="s2">&quot;main&quot;</span><span class="p">)</span>
<span class="p">(</span><span class="s2">&quot;uid:line&quot;</span><span class="p">:</span> <span class="mi">22</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>resource</strong> (<em>dict</em>) – dictionary representing one resource
w.r.t <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of <code class="docutils literal notranslate"><span class="pre">(str,</span> <span class="pre">value)</span></code> pairs, where the <code class="docutils literal notranslate"><span class="pre">value</span></code> is
flattened to either a <cite>string</cite>, or <cite>decimal</cite> representation and <code class="docutils literal notranslate"><span class="pre">str</span></code>
corresponds to the key of the item</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.query.all_numerical_resource_fields_of">
<span class="sig-prename descclassname"><span class="pre">perun.profile.query.</span></span><span class="sig-name descname"><span class="pre">all_numerical_resource_fields_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><span class="pre">Profile</span></a></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/query.html#all_numerical_resource_fields_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.query.all_numerical_resource_fields_of" title="Link to this definition">¶</a></dt>
<dd><p>Generator for iterating through all the fields (both flattened and
original) that are occuring in the resources and takes as domain integer
values.</p>
<p>Generator iterates through all the resources and checks their flattened
keys and yields them in case they were not yet processed. If the instance
of the key does not contain integer values, it is skipped.</p>
<p>E.g. considering the example profiles from <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a>, the function
yields the following for <cite>memory</cite>, <cite>time</cite> and <cite>trace</cite> profiles
respectively (considering we convert the stream to list):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">memory_num_resource_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;address&#39;</span><span class="p">,</span> <span class="s1">&#39;amount&#39;</span><span class="p">,</span> <span class="s1">&#39;uid:line&#39;</span><span class="p">]</span>
<span class="n">time_num_resource_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">]</span>
<span class="n">complexity_num_resource_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;amount&#39;</span><span class="p">,</span> <span class="s1">&#39;structure-unit-size&#39;</span><span class="p">]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>profile</strong> (<a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><em>Profile</em></a>) – performance profile w.r.t <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a></p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of resource fields key as <cite>str</cite>, that takes integer values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.query.unique_resource_values_of">
<span class="sig-prename descclassname"><span class="pre">perun.profile.query.</span></span><span class="sig-name descname"><span class="pre">unique_resource_values_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><span class="pre">Profile</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/query.html#unique_resource_values_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.query.unique_resource_values_of" title="Link to this definition">¶</a></dt>
<dd><p>Generator of all unique key values occurring in the resources, w.r.t.
<a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a> specification of resources.</p>
<p>Iterates through all the values of given <code class="docutils literal notranslate"><span class="pre">resource_keys</span></code> and yields
only unique values. Note that the key can contain ‘:’ symbol indicating
another level of dictionary hierarchy or ‘::’ for specifying keys in list
or set level, e.g. in case of <cite>traces</cite> one uses <code class="docutils literal notranslate"><span class="pre">trace::function</span></code>.</p>
<p>E.g. considering the example profiles from <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a>, the function
yields the following for <cite>memory</cite>, <cite>time</cite> and <cite>trace</cite> profiles stored
in variables <code class="docutils literal notranslate"><span class="pre">mprof</span></code>, <code class="docutils literal notranslate"><span class="pre">tprof</span></code> and <code class="docutils literal notranslate"><span class="pre">cprof</span></code> respectively:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">unique_resource_values_of</span><span class="p">(</span><span class="n">mprof</span><span class="p">,</span> <span class="s1">&#39;subtype&#39;</span><span class="p">)</span>
<span class="go">[&#39;malloc&#39;, &#39;free&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">unique_resource_values_of</span><span class="p">(</span><span class="n">tprof</span><span class="p">,</span> <span class="s1">&#39;amount&#39;</span><span class="p">)</span>
<span class="go">[0.616, 0.500, 0.125]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">unique_resource_values_of</span><span class="p">(</span><span class="n">cprof</span><span class="p">,</span> <span class="s1">&#39;uid&#39;</span><span class="p">)</span>
<span class="go">[&#39;SLList_init(SLList*)&#39;, &#39;SLList_search(SLList*, int)&#39;,</span>
<span class="go"> &#39;SLList_insert(SLList*, int)&#39;, &#39;SLList_destroy(SLList*)&#39;]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profile</strong> (<a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><em>Profile</em></a>) – performance profile w.r.t <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a></p></li>
<li><p><strong>resource_key</strong> (<em>str</em>) – the resources key identifier whose unique values
will be iterated</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of unique resource key values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.query.all_key_values_of">
<span class="sig-prename descclassname"><span class="pre">perun.profile.query.</span></span><span class="sig-name descname"><span class="pre">all_key_values_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">resource</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resource_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/query.html#all_key_values_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.query.all_key_values_of" title="Link to this definition">¶</a></dt>
<dd><p>Generator of all (not essentially unique) key values in resource, w.r.t
<a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a> specification of resources.</p>
<p>Iterates through all of the values of given <code class="docutils literal notranslate"><span class="pre">resource_key</span></code> and yields
every value it finds. Note that the key can contain ‘:’ symbol indicating
another level of dictionary hierarchy or ‘::’ for specifying keys in list
or set level, e.g. in case of <cite>traces</cite> one uses <code class="docutils literal notranslate"><span class="pre">trace::function</span></code>.</p>
<p>E.g. considering the example profiles from <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a> and the
resources <code class="docutils literal notranslate"><span class="pre">mres</span></code> from the profile of <cite>memory</cite> type, we can obtain all of
the values of <code class="docutils literal notranslate"><span class="pre">trace::function</span></code> key as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">query</span><span class="o">.</span><span class="n">all_key_values_of</span><span class="p">(</span><span class="n">mres</span><span class="p">,</span> <span class="s1">&#39;trace::function&#39;</span><span class="p">)</span>
<span class="go">[&#39;free&#39;, &#39;main&#39;, &#39;__libc_start_main&#39;, &#39;_start&#39;]</span>
</pre></div>
</div>
<p>Note that this is mostly useful for iterating through list or nested
dictionaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>resource</strong> (<em>dict</em>) – dictionary representing one resource
w.r.t <a class="reference internal" href="#perfkey-resources"><em class="xref std std-pkey">resources</em></a></p></li>
<li><p><strong>resource_key</strong> (<em>str</em>) – the resources key identifier whose unique values
will be iterated</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of all resource key values</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="perun.profile.query.unique_model_values_of">
<span class="sig-prename descclassname"><span class="pre">perun.profile.query.</span></span><span class="sig-name descname"><span class="pre">unique_model_values_of</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">profile</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><span class="pre">Profile</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">model_key</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></span></span><a class="reference internal" href="_modules/perun/profile/query.html#unique_model_values_of"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#perun.profile.query.unique_model_values_of" title="Link to this definition">¶</a></dt>
<dd><p>Generator of all unique key values occurring in the models in the
resources of given performance profile w.r.t. <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>.</p>
<p>Iterates through all of the values of given <code class="docutils literal notranslate"><span class="pre">resource_keys</span></code> and yields
only unique values. Note that the key can contain ‘:’ symbol indicating
another level of dictionary hierarchy or ‘::’ for specifying keys in list
or set level, e.g. in case of <cite>traces</cite> one uses <code class="docutils literal notranslate"><span class="pre">trace::function</span></code>.  For
more details about the specification of models refer to <a class="reference internal" href="#perfkey-models"><em class="xref std std-pkey">models</em></a> or
<a class="reference internal" href="postprocessors.html#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>).</p>
<p>E.g. given some trace profile <code class="docutils literal notranslate"><span class="pre">complexity_prof</span></code>, we can obtain
unique values of keys from <cite>models</cite> as follows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">unique_model_values_of</span><span class="p">(</span><span class="s1">&#39;model&#39;</span><span class="p">)</span>
<span class="go">[&#39;constant&#39;, &#39;exponential&#39;, &#39;linear&#39;, &#39;logarithmic&#39;, &#39;quadratic&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">query</span><span class="o">.</span><span class="n">unique_model_values_of</span><span class="p">(</span><span class="s1">&#39;r_square&#39;</span><span class="p">))</span>
<span class="go">[0.0, 0.007076437903106431, 0.0017560012128507133,</span>
<span class="go"> 0.0008704119815403224, 0.003480627284909902, 0.001977866710139782,</span>
<span class="go"> 0.8391363620083871, 0.9840099999298596, 0.7283427343995424,</span>
<span class="go"> 0.9709120064750161, 0.9305786182556899]</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>profile</strong> (<a class="reference internal" href="#perun.profile.factory.Profile" title="perun.profile.factory.Profile"><em>Profile</em></a>) – performance profile w.r.t <a class="reference internal" href="#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a></p></li>
<li><p><strong>model_key</strong> (<em>str</em>) – key identifier from <cite>models</cite> for which we query
its unique values</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>iterable stream of unique model key values</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="index.html">
    <h3>Perun</h3>
  </a>
</p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Perun’s Profile Format</a><ul>
<li><a class="reference internal" href="#specification-of-profile-format">Specification of Profile Format</a></li>
<li><a class="reference internal" href="#module-perun.profile.helpers">Profile API</a><ul>
<li><a class="reference internal" href="#perun.profile.factory.Profile"><code class="docutils literal notranslate"><span class="pre">Profile</span></code></a><ul>
<li><a class="reference internal" href="#perun.profile.factory.Profile.all_filtered_models"><code class="docutils literal notranslate"><span class="pre">Profile.all_filtered_models()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.factory.Profile.all_models"><code class="docutils literal notranslate"><span class="pre">Profile.all_models()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.factory.Profile.all_resources"><code class="docutils literal notranslate"><span class="pre">Profile.all_resources()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.factory.Profile.all_snapshots"><code class="docutils literal notranslate"><span class="pre">Profile.all_snapshots()</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.profile.convert">Profile Conversions API</a><ul>
<li><a class="reference internal" href="#perun.profile.convert.resources_to_pandas_dataframe"><code class="docutils literal notranslate"><span class="pre">resources_to_pandas_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.convert.to_flame_graph_format"><code class="docutils literal notranslate"><span class="pre">to_flame_graph_format()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.convert.plot_data_from_coefficients_of"><code class="docutils literal notranslate"><span class="pre">plot_data_from_coefficients_of()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.profile.query">Profile Query API</a><ul>
<li><a class="reference internal" href="#perun.profile.query.all_items_of"><code class="docutils literal notranslate"><span class="pre">all_items_of()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.query.all_numerical_resource_fields_of"><code class="docutils literal notranslate"><span class="pre">all_numerical_resource_fields_of()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.query.unique_resource_values_of"><code class="docutils literal notranslate"><span class="pre">unique_resource_values_of()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.query.all_key_values_of"><code class="docutils literal notranslate"><span class="pre">all_key_values_of()</span></code></a></li>
<li><a class="reference internal" href="#perun.profile.query.unique_model_values_of"><code class="docutils literal notranslate"><span class="pre">unique_model_values_of()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div><div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="overview.html" title="previous chapter">Perun: Performance Under Control</a></li>
      <li>Next: <a href="cli.html" title="next chapter">Command Line Interface</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/profile.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Tomas Fiedor, Jiri Pavela, Simon Stupinsky, et al..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 7.2.6</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.13</a>
      
      |
      <a href="_sources/profile.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>