
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Postprocessors Overview &#8212; Perun 0.15.4 documentation</title>
    <link rel="stylesheet" href="_static/perun.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.15.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Visualizations Overview" href="views.html" />
    <link rel="prev" title="Collectors Overview" href="collectors.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="module-perun.postprocess">
<span id="id1"></span><span id="postprocessors-overview"></span><h1>Postprocessors Overview<a class="headerlink" href="#module-perun.postprocess" title="Permalink to this headline">¶</a></h1>
<p>Performance profiles originate either from the user’s own means (i.e. by
building their own collectors and generating the profiles w.r.t
<a class="reference internal" href="profile.html#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>) or using one of the collectors from Perun’s tool suite.</p>
<p>Perun can postprocess such profiling data in two ways:</p>
<blockquote>
<div><ol class="arabic simple">
<li>By <strong>Directly running postprocessors</strong> through <code class="docutils literal"><span class="pre">perun</span> <span class="pre">postprocessby</span></code>
command, that takes the profile (either stored or pending) and uses a
single postprocessor with given configuration.</li>
<li>By <strong>Using job specification</strong> either as a single run of batch of
profiling jobs using <code class="docutils literal"><span class="pre">perun</span> <span class="pre">run</span> <span class="pre">job</span></code> or according to the specification
of the so called job matrix using <code class="docutils literal"><span class="pre">perun</span> <span class="pre">run</span> <span class="pre">matrix</span></code> command.</li>
</ol>
</div></blockquote>
<p>The format of input and resulting profiles has to be w.r.t.
<a class="reference internal" href="profile.html#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>. By default new profiles are created. The <a class="reference internal" href="profile.html#perfreg-origin"><code class="xref std std-preg docutils literal"><span class="pre">origin</span></code></a>
set to the origin of the original profile. Further, <a class="reference internal" href="profile.html#perfreg-postprocessors"><code class="xref std std-preg docutils literal"><span class="pre">postprocessors</span></code></a> is
extended with configuration of the run postprocessor (appended at the end).</p>
<p>All of the postprocessed profiles are stored in the <code class="docutils literal"><span class="pre">.perun/jobs/</span></code> directory
as a file with the <code class="docutils literal"><span class="pre">.perf</span></code> extension. The filename is by default
automatically generated according to the following template:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">bin</span><span class="o">-</span><span class="n">collector</span><span class="o">-</span><span class="n">workload</span><span class="o">-</span><span class="n">timestamp</span><span class="o">.</span><span class="n">perf</span>
</pre></div>
</div>
<p>Profiles can be further registered and stored in persistent storage using
<code class="docutils literal"><span class="pre">perun</span> <span class="pre">add</span></code> command.  Then both stored and pending profiles (i.e. those not
yet assigned) can be interpreted using available interpretation techniques
using <code class="docutils literal"><span class="pre">perun</span> <span class="pre">show</span></code>.  Refer to <a class="reference internal" href="cli.html"><span class="doc">Command Line Interface</span></a> and <a class="reference internal" href="views.html"><span class="doc">Visualizations Overview</span></a> for more details
about running command line commands and capabilities fo interpretation
techniques respectively. Internals of perun storage is described in
<a class="reference internal" href="internals.html"><span class="doc">Perun Internals</span></a>.</p>
<a class="reference internal image-reference" href="_images/architecture-postprocessors.svg"><div align="center" class="align-center"><img alt="_images/architecture-postprocessors.svg" src="_images/architecture-postprocessors.svg" width="100%" /></div>
</a>
<div class="section" id="supported-postprocessors">
<span id="postprocessors-list"></span><h2>Supported Postprocessors<a class="headerlink" href="#supported-postprocessors" title="Permalink to this headline">¶</a></h2>
<p>Perun’s tool suite currently contains the following two postprocessors:</p>
<blockquote>
<div><ol class="arabic simple">
<li><a class="reference internal" href="#postprocessors-normalizer"><span class="std std-ref">Normalizer Postprocessor</span></a> scales the resources of the given profile to the
interval (0, 1). The main intuition behind the usage of this postprocessor is to be able to
compare profiles from different workloads or parameters, which may have different scales of
resource amounts.</li>
<li><a class="reference internal" href="#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a> (authored by <strong>Jirka Pavela</strong>) attempts to do a
regression analysis by finding the fitting model for dependent variable based on other
independent one. Currently the postprocessor focuses on finding a well
suited model (linear, quadratic, logarithmic, etc.) for the amount of time duration
depending on size of the data structure the function operates on.</li>
<li><a class="reference internal" href="#postprocessors-clusterizer"><span class="std std-ref">Clusterizer</span></a> tries to classify resources to uniquely identified clusters,
which can be used for further postprocessing (e.g. by regression analysis) or to group
similar amounts of resources.</li>
</ol>
</div></blockquote>
<p>All of the listed postprocessors can be run from command line. For more information about command
line interface for individual postprocessors refer to <a class="reference internal" href="cli.html#cli-postprocess-units-ref"><span class="std std-ref">Postprocess units</span></a>.</p>
<p>Postprocessors modules are implementation independent and only requires a simple python interface
registered within Perun. For brief tutorial how to create and register your own postprocessors
refer to <a class="reference internal" href="#postprocessors-custom"><span class="std std-ref">Creating your own Postprocessor</span></a>.</p>
<div class="section" id="module-perun.postprocess.normalizer">
<span id="normalizer-postprocessor"></span><span id="postprocessors-normalizer"></span><h3>Normalizer Postprocessor<a class="headerlink" href="#module-perun.postprocess.normalizer" title="Permalink to this headline">¶</a></h3>
<p>Normalizer is a simple postprocessor that normalizes the values.</p>
<div class="section" id="command-line-interface">
<h4>Command Line Interface<a class="headerlink" href="#command-line-interface" title="Permalink to this headline">¶</a></h4>
<div class="section" id="perun-postprocessby-normalizer">
<h5>perun postprocessby normalizer<a class="headerlink" href="#perun-postprocessby-normalizer" title="Permalink to this headline">¶</a></h5>
<p>Normalizes performance profile into flat interval.</p>
<dl class="docutils">
<dt></dt>
<dd><ul class="first last simple">
<li><strong>Limitations</strong>: <cite>none</cite></li>
<li><strong>Dependencies</strong>: <cite>none</cite></li>
</ul>
</dd>
</dl>
<p>Normalizer is a postprocessor, which iterates through all of the snapshots
and normalizes the resources of same type to interval <code class="docutils literal"><span class="pre">(0,</span> <span class="pre">1)</span></code>, where
<code class="docutils literal"><span class="pre">1</span></code> corresponds to the maximal value of the given type.</p>
<p>Consider the following list of resources for one snapshot generated by
<a class="reference internal" href="collectors.html#collectors-time"><span class="std std-ref">Time Collector</span></a>:</p>
<pre class="literal-block">
[
    {
        'amount': 0.59,
        'uid': 'sys'
    }, {
        'amount': 0.32,
        'uid': 'user'
    }, {
        'amount': 2.32,
        'uid': 'real'
    }
]
</pre>
<p>Normalizer yields the following set of resources:</p>
<pre class="literal-block">
[
    {
        'amount': 0.2543103448275862,
        'uid': 'sys'
    }, {
        'amount': 0.13793103448275865,
        'uid': 'user'
    }, {
        'amount': 1.0,
        'uid': 'real'
    }
]
</pre>
<p>Refer to <a class="reference internal" href="#postprocessors-normalizer"><span class="std std-ref">Normalizer Postprocessor</span></a> for more thorough description and
examples of <cite>normalizer</cite> postprocessor.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>perun postprocessby normalizer <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="module-perun.postprocess.regression_analysis">
<span id="regression-analysis"></span><span id="postprocessors-regression-analysis"></span><h3>Regression Analysis<a class="headerlink" href="#module-perun.postprocess.regression_analysis" title="Permalink to this headline">¶</a></h3>
<p>Postprocessing of input profiles using the regression analysis. The
regression analysis offers several computational methods and models for finding
fitting models for trends in the captured profiling resources.</p>
<div class="section" id="postprocessors-regression-analysis-cli">
<span id="id2"></span><h4>Command Line Interface<a class="headerlink" href="#postprocessors-regression-analysis-cli" title="Permalink to this headline">¶</a></h4>
<div class="section" id="perun-postprocessby-regression-analysis">
<h5>perun postprocessby regression_analysis<a class="headerlink" href="#perun-postprocessby-regression-analysis" title="Permalink to this headline">¶</a></h5>
<p>Finds fitting regression models to estimate models of profiled resources.</p>
<dl class="docutils">
<dt></dt>
<dd><ul class="first last simple">
<li><strong>Limitations</strong>: Currently limited to models of <cite>amount</cite> depending on
<cite>structural-unit-size</cite></li>
<li><strong>Dependencies</strong>: <a class="reference internal" href="collectors.html#collectors-trace"><span class="std std-ref">Trace Collector</span></a></li>
</ul>
</dd>
</dl>
<p>Regression analyzer tries to find a fitting model to estimate the <cite>amount</cite>
of resources depending on <cite>structural-unit-size</cite>.</p>
<p>The following strategies are currently available:</p>
<blockquote>
<div><ol class="arabic simple">
<li><strong>Full Computation</strong> uses all of the data points to obtain the best
fitting model for each type of model from the database (unless
<code class="docutils literal"><span class="pre">--regression_models</span></code>/<code class="docutils literal"><span class="pre">-r</span></code> restrict the set of models)</li>
<li><strong>Iterative Computation</strong> uses a percentage of data points to obtain
some preliminary models together with their errors or fitness. The
most fitting model is then expanded, until it is fully computed or
some other model becomes more fitting.</li>
<li><strong>Full Computation with initial estimate</strong> first uses some percent
of data to estimate which model would be best fitting. Given model
is then fully computed.</li>
<li><strong>Interval Analysis</strong> uses more finer set of intervals of data and
estimates models for each interval providing more precise modeling
of the profile.</li>
<li><strong>Bisection Analysis</strong> fully computes the models for full interval.
Then it does a split of the interval and computes new models for
them. If the best fitting models changed for sub intervals, then we
continue with the splitting.</li>
</ol>
</div></blockquote>
<p>Currently we support <strong>linear</strong>, <strong>quadratic</strong>, <strong>power</strong>, <strong>logaritmic</strong>
and <strong>constant</strong> models and use the <cite>coeficient of determination</cite>
(<span class="math">\(R^2\)</span>) to measure the fitness of model. The models are stored as
follows:</p>
<pre class="literal-block">
{
    &quot;uid&quot;: &quot;SLList_insert(SLList*, int)&quot;,
    &quot;r_square&quot;: 0.0017560012128507133,
    &quot;coeffs&quot;: [
        {
            &quot;value&quot;: 0.505375215875552,
            &quot;name&quot;: &quot;b0&quot;
        },
        {
            &quot;value&quot;: 9.935159839322705e-06,
            &quot;name&quot;: &quot;b1&quot;
        }
    ],
    &quot;x_interval_start&quot;: 0,
    &quot;x_interval_end&quot;: 11892,
    &quot;model&quot;: &quot;linear&quot;,
    &quot;method&quot;: &quot;full&quot;,
}
</pre>
<p>Note that if your data are not suitable for regression analysis, check out
<a class="reference internal" href="#postprocessors-clusterizer"><span class="std std-ref">Clusterizer</span></a> to postprocess your profile to be
analysable by this analysis.</p>
<p>For more details about regression analysis refer to
<a class="reference internal" href="#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>. For more details how to collect
suitable resources refer to <a class="reference internal" href="collectors.html#collectors-trace"><span class="std std-ref">Trace Collector</span></a>.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>perun postprocessby regression_analysis <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-perun-postprocessby-regression-analysis-m">
<code class="descname">-m</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--method</code><code class="descclassname"> &lt;method&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-regression-analysis-m" title="Permalink to this definition">¶</a></dt>
<dd><p>Will use the &lt;method&gt; to find the best fitting models for the given profile.  [required]</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-regression-analysis-r">
<code class="descname">-r</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--regression_models</code><code class="descclassname"> &lt;regression_models&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-regression-analysis-r" title="Permalink to this definition">¶</a></dt>
<dd><p>Restricts the list of regression models used by the specified &lt;method&gt; to fit the data. If omitted, all regression models will be used in the computation.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-regression-analysis-s">
<code class="descname">-s</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--steps</code><code class="descclassname"> &lt;steps&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-regression-analysis-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Restricts the number of number of steps / data parts used by the iterative, interval and initial guess methods</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-regression-analysis-dp">
<code class="descname">-dp</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--depending-on</code><code class="descclassname"> &lt;per_key&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-regression-analysis-dp" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the key that will be used as a source of independent variable.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-regression-analysis-o">
<code class="descname">-o</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--of</code><code class="descclassname"> &lt;of_key&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-regression-analysis-o" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets key for which we are finding the model.</p>
</dd></dl>

</div>
</div>
<div class="section" id="examples">
<span id="postprocessors-regression-analysis-examples"></span><h4>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h4>
<div class="highlight-json"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185
186
187
188
189
190
191
192
193
194
195
196
197
198
199
200</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;origin&quot;</span><span class="p">:</span> <span class="s2">&quot;f7f3dcea69b97f2b03c421a223a770917149cfae&quot;</span><span class="p">,</span>
  <span class="nt">&quot;header&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;cmd&quot;</span><span class="p">:</span> <span class="s2">&quot;../stap-collector/tst&quot;</span><span class="p">,</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span><span class="p">,</span>
    <span class="nt">&quot;units&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;mixed(time delta)&quot;</span><span class="p">:</span> <span class="s2">&quot;us&quot;</span>
    <span class="p">},</span>
    <span class="nt">&quot;workload&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;collector_info&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;complexity&quot;</span><span class="p">,</span>
    <span class="nt">&quot;params&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="nt">&quot;rules&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;SLList_init&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SLList_insert&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SLList_search&quot;</span><span class="p">,</span>
        <span class="s2">&quot;SLList_destroy&quot;</span>
      <span class="p">],</span>
      <span class="nt">&quot;sampling&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert&quot;</span><span class="p">,</span>
          <span class="nt">&quot;sample&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">},</span>
        <span class="p">{</span>
          <span class="nt">&quot;func&quot;</span><span class="p">:</span> <span class="s2">&quot;func1&quot;</span><span class="p">,</span>
          <span class="nt">&quot;sample&quot;</span><span class="p">:</span> <span class="mi">1</span>
        <span class="p">}</span>
      <span class="p">],</span>
      <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;custom&quot;</span><span class="p">,</span>
      <span class="nt">&quot;global_sampling&quot;</span><span class="p">:</span> <span class="kc">null</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="nt">&quot;postprocessors&quot;</span><span class="p">:</span> <span class="p">[],</span>
  <span class="nt">&quot;global&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;models&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
        <span class="nt">&quot;coeffs&quot;</span><span class="p">:</span> <span class="p">[</span>
          <span class="p">{</span>
            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.75</span><span class="p">,</span>
            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b0&quot;</span>
          <span class="p">},</span>
<span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span>
</span><span class="hll">          <span class="p">}</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_end&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;constant&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;r_square&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_start&quot;</span><span class="p">:</span> <span class="mi">0</span>
</span><span class="hll">      <span class="p">},</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;coeffs&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b0&quot;</span>
</span><span class="hll">          <span class="p">},</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span>
</span><span class="hll">          <span class="p">}</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_end&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;exponential&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;r_square&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_start&quot;</span><span class="p">:</span> <span class="mi">0</span>
</span><span class="hll">      <span class="p">},</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;coeffs&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.6</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b0&quot;</span>
</span><span class="hll">          <span class="p">},</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span>
</span><span class="hll">          <span class="p">}</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_end&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;linear&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;r_square&quot;</span><span class="p">:</span> <span class="mf">0.06666666666666667</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_start&quot;</span><span class="p">:</span> <span class="mi">0</span>
</span><span class="hll">      <span class="p">},</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;coeffs&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.08877935258260898</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b0&quot;</span>
</span><span class="hll">          <span class="p">},</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.9675751528184126</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span>
</span><span class="hll">          <span class="p">}</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_end&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;logarithmic&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;r_square&quot;</span><span class="p">:</span> <span class="mf">0.8668309711260865</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_start&quot;</span><span class="p">:</span> <span class="mi">0</span>
</span><span class="hll">      <span class="p">},</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;coeffs&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b0&quot;</span>
</span><span class="hll">          <span class="p">},</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span>
</span><span class="hll">          <span class="p">}</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_end&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;power&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;r_square&quot;</span><span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_start&quot;</span><span class="p">:</span> <span class="mi">0</span>
</span><span class="hll">      <span class="p">},</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;coeffs&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.5714285714285714</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b0&quot;</span>
</span><span class="hll">          <span class="p">},</span>
</span><span class="hll">          <span class="p">{</span>
</span><span class="hll">            <span class="nt">&quot;value&quot;</span><span class="p">:</span> <span class="mf">0.05102040816326531</span><span class="p">,</span>
</span><span class="hll">            <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;b1&quot;</span>
</span><span class="hll">          <span class="p">}</span>
</span><span class="hll">        <span class="p">],</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_end&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;model&quot;</span><span class="p">:</span> <span class="s2">&quot;quadratic&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;r_square&quot;</span><span class="p">:</span> <span class="mf">0.17006802721088435</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;method&quot;</span><span class="p">:</span> <span class="s2">&quot;full&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;x_interval_start&quot;</span><span class="p">:</span> <span class="mi">0</span>
</span><span class="hll">      <span class="p">}</span>
</span><span class="hll">    <span class="p">],</span>
</span><span class="hll">    <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
</span><span class="hll">      <span class="p">{</span>
</span><span class="hll">        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">6</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_init(SLList*)&quot;</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
</span><span class="hll">        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
</span>      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_search(SLList*, int)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_insert(SLList*, int)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
        <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;time delta&quot;</span><span class="p">,</span>
        <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;SLList_destroy(SLList*)&quot;</span><span class="p">,</span>
        <span class="nt">&quot;structure-unit-size&quot;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;mixed&quot;</span>
      <span class="p">}</span>
    <span class="p">],</span>
    <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;6.8e-05s&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The profile above shows the complexity profile taken from <a class="reference internal" href="collectors.html#collectors-trace-examples"><span class="std std-ref">Examples</span></a> and
postprocessed using the full method. The highlighted part shows all of the fully computed models of
form <span class="math">\(y = b_0 + b_1*f(x)\)</span>, represented by their types (e.g. <cite>linear</cite>, <cite>quadratic</cite>, etc.),
concrete found coeficients <span class="math">\(b_0\)</span> and <span class="math">\(b_1\)</span> and e.g. coeficient of determination
<span class="math">\(R^2\)</span> for measuring the fitting of the model.</p>
<img alt="_images/complexity-scatter-with-models-full.png" src="_images/complexity-scatter-with-models-full.png" />
<p>The <a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> above shows the interpreted models of different complexity example,
computed using the <strong>full computation</strong> method. In the picture, one can see that the depedency of
running time based on the structural size is best fitted by <cite>linear</cite> models.</p>
<img alt="_images/complexity-scatter-with-models-initial-guess.png" src="_images/complexity-scatter-with-models-initial-guess.png" />
<p>The next <cite>scatter plot</cite> displays the same data as previous, but regressed using the <cite>initial guess</cite>
strategy. This strategy first does a computation of all models on small sample of data points. Such
computation yields initial estimate of fitness of models (the initial sample is selected by
random). The best fitted model is then chosen and fully computed on the rest of the data points.</p>
<p>The picture shows only one model, namely <cite>linear</cite> which was fully computed to best fit the given
data points. The rest of the models had worse estimation and hence was not computed at all.</p>
</div>
</div>
<div class="section" id="module-perun.postprocess.clusterizer">
<span id="clusterizer"></span><span id="postprocessors-clusterizer"></span><h3>Clusterizer<a class="headerlink" href="#module-perun.postprocess.clusterizer" title="Permalink to this headline">¶</a></h3>
<p>A postprocessor that attempts to classify resources to clusters.</p>
<p>The main usage of this postprocessors is to prepare any kind of profile for further
postprocessing, mainly by <a class="reference internal" href="#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>. The clusterization
is either realized w.r.t the sorted order of the resources or sliding window,
with parametric width and height.</p>
<div class="section" id="postprocessors-clusterizer-cli">
<span id="id3"></span><h4>Command Line Interface<a class="headerlink" href="#postprocessors-clusterizer-cli" title="Permalink to this headline">¶</a></h4>
<div class="section" id="perun-postprocessby-clusterizer">
<h5>perun postprocessby clusterizer<a class="headerlink" href="#perun-postprocessby-clusterizer" title="Permalink to this headline">¶</a></h5>
<p>Clusters each resource to an appropriate cluster in order to be postprocessable
by regression analysis.</p>
<dl class="docutils">
<dt></dt>
<dd><ul class="first last simple">
<li><strong>Limitations</strong>: <cite>none</cite></li>
<li><strong>Dependencies</strong>: <cite>none</cite></li>
</ul>
</dd>
</dl>
<p>Clusterizer tries to find a suitable cluster for each resource in the profile. The clusters
are either computed w.r.t the sort order of the resource amounts, or are computed according
to the sliding window.</p>
<p>The sliding window can be further adjusted by setting its <strong>width</strong> (i.e. how many near values
on the x axis will we fit to a cluster) and its <strong>height</strong> (i.e. how big of an interval of
resource amounts will be consider for one cluster). Both <strong>width</strong> and <strong>height</strong> can be further
augmented. <strong>Width</strong> can either be <cite>absolute</cite>, where we take in maximum the absolute number of
resources, <cite>relative</cite>, where we take in maximum the percentage of number of resources for each
cluster, or <cite>weighted</cite>, where we take the number of resource depending on the frequency of their
occurrences. Similarly, the <strong>height</strong> can either be <cite>absolute</cite>, where we set the interval of
amounts to an absolute size, or <cite>relative</cite>, where we set the interval of amounts relative to the
to the first resource amount in the cluster (so e.g. if we have window of height 0.1 and the
first resource in the cluster has amount of 100, we will cluster every resources in interval 100
to 110 to this cluster).</p>
<p>For more details about regression analysis refer to <a class="reference internal" href="#postprocessors-clusterizer"><span class="std std-ref">Clusterizer</span></a>.</p>
<div class="highlight-shell"><div class="highlight"><pre><span></span>perun postprocessby clusterizer <span class="o">[</span>OPTIONS<span class="o">]</span>
</pre></div>
</div>
<p class="rubric">Options</p>
<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-s">
<code class="descname">-s</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--strategy</code><code class="descclassname"> &lt;strategy&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-s" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the clustering strategy, that will be applied for the profile</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-wh">
<code class="descname">-wh</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--window-height</code><code class="descclassname"> &lt;window_height&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-wh" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the height of the window (either fixed or proportional)</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-rwh">
<code class="descname">-rwh</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--relative-window-height</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-rwh" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies that the height of the window is relative to the point</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-fwh">
<code class="descname">-fwh</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--fixed-window-height</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-fwh" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies that the height of the window is absolute to the point</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-ww">
<code class="descname">-ww</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--window-width</code><code class="descclassname"> &lt;window_width&gt;</code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-ww" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies the width of the window, i.e. how many values will be taken by window.</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-rww">
<code class="descname">-rww</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--relative-window-width</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-rww" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether the width of the window is weighted or fixed</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-fww">
<code class="descname">-fww</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--fixed-window-width</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-fww" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether the width of the window is weighted or fixed</p>
</dd></dl>

<dl class="option">
<dt id="cmdoption-perun-postprocessby-clusterizer-www">
<code class="descname">-www</code><code class="descclassname"></code><code class="descclassname">, </code><code class="descname">--weighted-window-width</code><code class="descclassname"></code><a class="headerlink" href="#cmdoption-perun-postprocessby-clusterizer-www" title="Permalink to this definition">¶</a></dt>
<dd><p>Specifies whether the width of the window is weighted or fixed</p>
</dd></dl>

</div>
</div>
<div class="section" id="postprocessors-clusterizer-examples">
<span id="id4"></span><h4>Examples<a class="headerlink" href="#postprocessors-clusterizer-examples" title="Permalink to this headline">¶</a></h4>
<div class="highlight-json"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="nt">&quot;snapshots&quot;</span><span class="p">:</span> <span class="p">[</span>
    <span class="p">{</span>
      <span class="nt">&quot;time&quot;</span><span class="p">:</span> <span class="s2">&quot;5.000000&quot;</span><span class="p">,</span>
      <span class="nt">&quot;resources&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
          <span class="nt">&quot;amount&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
          <span class="nt">&quot;trace&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
              <span class="nt">&quot;line&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;malloc&quot;</span><span class="p">,</span>
              <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;unreachable&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;line&quot;</span><span class="p">:</span> <span class="mi">21</span><span class="p">,</span>
              <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;main&quot;</span><span class="p">,</span>
              <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;../memory_collect_test.c&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;line&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;__libc_start_main&quot;</span><span class="p">,</span>
              <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;unreachable&quot;</span>
            <span class="p">},</span>
            <span class="p">{</span>
              <span class="nt">&quot;line&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
              <span class="nt">&quot;function&quot;</span><span class="p">:</span> <span class="s2">&quot;_start&quot;</span><span class="p">,</span>
              <span class="nt">&quot;source&quot;</span><span class="p">:</span> <span class="s2">&quot;unreachable&quot;</span>
            <span class="p">}</span>
          <span class="p">],</span>
          <span class="nt">&quot;address&quot;</span><span class="p">:</span> <span class="mi">31584848</span><span class="p">,</span>
          <span class="nt">&quot;uid&quot;</span><span class="p">:</span> <span class="s2">&quot;../memory_collect_test.c:main#22&quot;</span><span class="p">,</span>
<span class="hll">          <span class="nt">&quot;cluster&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span>          <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;memory&quot;</span><span class="p">,</span>
          <span class="nt">&quot;subtype&quot;</span><span class="p">:</span> <span class="s2">&quot;malloc&quot;</span>
        <span class="p">},</span>
      <span class="p">]</span>
    <span class="p">}</span>
  <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</td></tr></table></div>
<p>The profile above shows an example of profile postprocessed by clusterizer (note that this is only
an excerpt of the whole profile). Each resource is annotated by a new field named <code class="docutils literal"><span class="pre">cluster</span></code>,
which can be used in further interpretation of the profiles (either by <a class="reference internal" href="views.html#views-bars"><span class="std std-ref">Bars Plot</span></a>,
<a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> or <a class="reference internal" href="#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a>).</p>
<img alt="_images/clusterizer-memory-scatter.png" src="_images/clusterizer-memory-scatter.png" />
<p>The <a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> above shows the memory profile of a simple example, which randomly
allocates memory with linear dependency and was collected by <a class="reference internal" href="collectors.html#collectors-memory"><span class="std std-ref">Memory Collector</span></a>. Since
<a class="reference internal" href="collectors.html#collectors-memory"><span class="std std-ref">Memory Collector</span></a> does not collect any other information, but memory rallocation records.
Such profile cannot be used to infer any models. However the <a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> above was
postprocessed by clusterizer and hence, we can plot the dependency of amount of allocated memory
per each cluster. The <a class="reference internal" href="views.html#views-scatter"><span class="std std-ref">Scatter Plot</span></a> itself ephasize the linear dependency of allocated
memory depending on some unknown parameters (here represented by <cite>cluster</cite>).</p>
<p>We can use <a class="reference internal" href="#postprocessors-regression-analysis"><span class="std std-ref">Regression Analysis</span></a> to prove our assumption, and on the plot below
we can see that the best model for the amount of allocated memory depending on clusters is indeed
<strong>linear</strong>.</p>
<img alt="_images/clusterizer-memory-scatter-with-models.png" src="_images/clusterizer-memory-scatter-with-models.png" />
</div>
</div>
</div>
<div class="section" id="creating-your-own-postprocessor">
<span id="postprocessors-custom"></span><h2>Creating your own Postprocessor<a class="headerlink" href="#creating-your-own-postprocessor" title="Permalink to this headline">¶</a></h2>
<p>New postprocessors can be registered within Perun in several steps. Internally they can be
implemented in any programming language and in order to work with perun requires one to three
phases to be specified as given in <a class="reference internal" href="#postprocessors-overview"><span class="std std-ref">Postprocessors Overview</span></a>—<code class="docutils literal"><span class="pre">before()</span></code>, <code class="docutils literal"><span class="pre">postprocess()</span></code>
and <code class="docutils literal"><span class="pre">after()</span></code>. Each new postprocessor requires a interface module <code class="docutils literal"><span class="pre">run.py</span></code>, which contains the
three function and, moreover, a CLI function for <a class="reference external" href="http://click.pocoo.org/5/">Click</a> framework.</p>
<p>You can register your new postprocessor as follows:</p>
<blockquote>
<div><ol class="arabic">
<li><p class="first">Run <code class="docutils literal"><span class="pre">perun</span> <span class="pre">utils</span> <span class="pre">create</span> <span class="pre">postprocess</span> <span class="pre">mypostprocessor</span></code> to generate a new modules in
<code class="docutils literal"><span class="pre">perun/postprocess</span></code> directory with the following structure. The command takes a predefined
templates for new postprocessors and creates <code class="docutils literal"><span class="pre">__init__.py</span></code> and <code class="docutils literal"><span class="pre">run.py</span></code> according to the
supplied command line arguments (see <a class="reference internal" href="cli.html#cli-utils-ref"><span class="std std-ref">Utility Commands</span></a> for more information about
interface of <code class="docutils literal"><span class="pre">perun</span> <span class="pre">utils</span> <span class="pre">create</span></code> command):</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">perun</span>
<span class="o">|--</span> <span class="o">/</span><span class="n">postprocess</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">mypostprocessor</span>
        <span class="o">|--</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="o">|--</span> <span class="n">run</span><span class="o">.</span><span class="n">py</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">normalizer</span>
    <span class="o">|--</span> <span class="o">/</span><span class="n">regression_analysis</span>
    <span class="o">|--</span> <span class="fm">__init__</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</li>
<li><p class="first">First, implement the <code class="docutils literal"><span class="pre">__init__py</span></code> file, including the module docstring with brief
postprocessor description and definitions of constants that are used for internal
checks which has the following structure:</p>
</li>
</ol>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;...&quot;&quot;&quot;</span>

<span class="n">SUPPORTED_PROFILES</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;mixed|memory|time&#39;</span><span class="p">]</span>

<span class="n">__author__</span> <span class="o">=</span> <span class="s1">&#39;You!&#39;</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="3">
<li>Next, implement the <code class="docutils literal"><span class="pre">run.py</span></code> module with <code class="docutils literal"><span class="pre">postprocess()</span></code> fucntion, (and optionally with
<code class="docutils literal"><span class="pre">before()</span></code> and <code class="docutils literal"><span class="pre">after()</span></code> functions). The <code class="docutils literal"><span class="pre">postprocess()</span></code> function should do the actual
postprocessing of the profile. Each function should return the integer status of the phase,
the status message (used in case of error) and dictionary including params passed to
additional phases and ‘profile’ with dictionary w.r.t. <a class="reference internal" href="profile.html#profile-spec"><span class="std std-ref">Specification of Profile Format</span></a>.</li>
</ol>
<div class="highlight-python"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">before</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;(optional)&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">STATUS_MSG</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">postprocess</span><span class="p">(</span><span class="n">profile</span><span class="p">,</span> <span class="o">**</span><span class="n">configuration</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;...&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">STATUS_MSG</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">after</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;(optional)&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">STATUS</span><span class="p">,</span> <span class="n">STATUS_MSG</span><span class="p">,</span> <span class="nb">dict</span><span class="p">(</span><span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="4">
<li>Additionally, implement the command line interface function in <code class="docutils literal"><span class="pre">run.py</span></code>, named the same as
your collector. This function will be called from the command line as <code class="docutils literal"><span class="pre">perun</span> <span class="pre">postprocessby</span>
<span class="pre">mypostprocessor</span></code> and is based on Click_libary.</li>
</ol>
<div class="highlight-udiff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gd">--- /mnt/f/phdwork/perun/gh-pages/docs/_static/templates/postprocess_run.py</span>
<span class="gi">+++ /mnt/f/phdwork/perun/gh-pages/docs/_static/templates/postprocess_run_api.py</span>
<span class="gu">@@ -1,3 +1,8 @@</span>
<span class="gi">+import click</span>
<span class="gi">+</span>
<span class="gi">+import perun.logic.runner as runner</span>
<span class="gi">+</span>
<span class="gi">+</span>
 def before(**kwargs):
     &quot;&quot;&quot;(optional)&quot;&quot;&quot;
     return STATUS, STATUS_MSG, dict(kwargs)
<span class="gu">@@ -11,3 +16,10 @@</span>
 def after(**kwargs):
     &quot;&quot;&quot;(optional)&quot;&quot;&quot;
     return STATUS, STATUS_MSG, dict(kwargs)
<span class="gi">+</span>
<span class="gi">+</span>
<span class="gi">+@click.command()</span>
<span class="gi">+@pass_profile</span>
<span class="gi">+def regression_analysis(profile, **kwargs):</span>
<span class="gi">+    &quot;&quot;&quot;...&quot;&quot;&quot;</span>
<span class="gi">+    runner.run_postprocessor_on_profile(profile, &#39;mypostprocessor&#39;, kwargs)</span>
</pre></div>
</td></tr></table></div>
<ol class="arabic simple" start="5">
<li>Finally register your newly created module in <code class="xref py py-func docutils literal"><span class="pre">get_supported_module_names()</span></code> located in
<code class="docutils literal"><span class="pre">perun.utils.__init__.py</span></code>:</li>
</ol>
<div class="highlight-udiff"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="gd">--- /mnt/f/phdwork/perun/gh-pages/docs/_static/templates/supported_module_names.py</span>
<span class="gi">+++ /mnt/f/phdwork/perun/gh-pages/docs/_static/templates/supported_module_names_postprocess.py</span>
<span class="gu">@@ -7,6 +7,6 @@</span>
     return {
         &#39;vcs&#39;: [&#39;git&#39;],
         &#39;collect&#39;: [&#39;trace&#39;, &#39;memory&#39;, &#39;time&#39;],
<span class="gd">-        &#39;postprocess&#39;: [&#39;filter&#39;, &#39;normalizer&#39;, &#39;regression_analysis&#39;],</span>
<span class="gi">+        &#39;postprocess&#39;: [&#39;filter&#39;, &#39;normalizer&#39;, &#39;regression_analysis&#39;, &#39;mypostprocessor&#39;],</span>
         &#39;view&#39;: [&#39;alloclist&#39;, &#39;bars&#39;, &#39;flamegraph&#39;, &#39;flow&#39;, &#39;heapmap&#39;, &#39;raw&#39;, &#39;scatter&#39;]
     }[package]
</pre></div>
</td></tr></table></div>
<ol class="arabic" start="6">
<li><p class="first">Preferably, verify that registering did not break anything in the Perun and if you are not
using the developer installation, then reinstall Perun:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">make</span> <span class="n">test</span>
<span class="n">make</span> <span class="n">install</span>
</pre></div>
</div>
</li>
<li><p class="first">At this point you can start using your postprocessor either using <code class="docutils literal"><span class="pre">perun</span> <span class="pre">postprocessby</span></code> or using the
following to set the job matrix and run the batch collection of profiles:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">perun</span> <span class="n">config</span> <span class="o">--</span><span class="n">edit</span>
<span class="n">perun</span> <span class="n">run</span> <span class="n">matrix</span>
</pre></div>
</div>
</li>
<li><p class="first">If you think your postprocessor could help others, please, consider making <a class="reference external" href="https://github.com/tfiedor/perun/pull/new/develop">Pull Request</a>.</p>
</li>
</ol>
</div></blockquote>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><p class="logo">
  <a href="index.html">
    <h3>Perun</h3>
  </a>
</p>
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Postprocessors Overview</a><ul>
<li><a class="reference internal" href="#supported-postprocessors">Supported Postprocessors</a><ul>
<li><a class="reference internal" href="#module-perun.postprocess.normalizer">Normalizer Postprocessor</a><ul>
<li><a class="reference internal" href="#command-line-interface">Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-postprocessby-normalizer">perun postprocessby normalizer</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.postprocess.regression_analysis">Regression Analysis</a><ul>
<li><a class="reference internal" href="#postprocessors-regression-analysis-cli">Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-postprocessby-regression-analysis">perun postprocessby regression_analysis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-perun.postprocess.clusterizer">Clusterizer</a><ul>
<li><a class="reference internal" href="#postprocessors-clusterizer-cli">Command Line Interface</a><ul>
<li><a class="reference internal" href="#perun-postprocessby-clusterizer">perun postprocessby clusterizer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#postprocessors-clusterizer-examples">Examples</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#creating-your-own-postprocessor">Creating your own Postprocessor</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="collectors.html" title="previous chapter">Collectors Overview</a></li>
      <li>Next: <a href="views.html" title="next chapter">Visualizations Overview</a></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/postprocessors.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Tomas Fiedor, Jiri Pavela, Simon Stupinsky, et al..
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.11</a>
      
      |
      <a href="_sources/postprocessors.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>